(function(){/*
 MIT License (c) copyright 2010-2013 B Cavalier & J Hann */
(function(l){function p(){}function v(a,b){return 0==T.call(a).indexOf("[object "+b)}function x(a){return a&&"/"==a.charAt(a.length-1)?a.substr(0,a.length-1):a}function D(a,b){var d,c,f,g;d=1;c=a;"."==c.charAt(0)&&(f=!0,c=c.replace(U,function(a,b,c,f){c&&d++;return f||""}));if(f){f=b.split("/");g=f.length-d;if(0>g)return a;f.splice(g,d);return f.concat(c||[]).join("/")}return c}function C(a){var b=a.indexOf("!");return{g:a.substr(b+1),d:0<=b&&a.substr(0,b)}}function A(){}function y(a,b){A.prototype=
a||N;var d=new A;A.prototype=N;for(var c in b)d[c]=b[c];return d}function E(){function a(a,b,d){c.push([a,b,d])}function b(a,b){for(var d,f=0;d=c[f++];)(d=d[a])&&d(b)}var d,c,f;d=this;c=[];f=function(d,n){a=d?function(a){a&&a(n)}:function(a,b){b&&b(n)};f=p;b(d?0:1,n);b=p;c=s};this.then=function(b,c,f){a(b,c,f);return d};this.h=function(a){d.B=a;f(!0,a)};this.f=function(a){d.pa=a;f(!1,a)};this.v=function(a){b(2,a)}}function z(a){return a instanceof E||a instanceof h}function t(a,b,d,c){z(a)?a.then(b,
d,c):b(a)}function B(a,b,d){var c;return function(){0<=--a&&b&&(c=b.apply(s,arguments));0==a&&d&&d(c);return c}}function e(){var a,b;r="";a=[].slice.call(arguments);v(a[0],"Object")&&(b=a.shift(),b=w(b));return new h(a[0],a[1],a[2],b)}function w(a,b,d){var c;r="";if(a&&(k.Q(a),q=k.b(a),"preloads"in a&&(c=new h(a.preloads,s,d,I,!0),k.l(function(){I=c})),a=a.main))return new h(a,b,d)}function h(a,b,d,c,f){var g;g=k.k(q,s,[].concat(a),f);this.then=this.then=a=function(a,b){t(g,function(b){a&&a.apply(s,
b)},function(a){if(b)b(a);else throw a;});return this};this.next=function(a,b,c){return new h(a,b,c,g)};this.config=w;(b||d)&&a(b,d);k.l(function(){t(f||I,function(){t(c,function(){k.q(g)},d)})})}function K(a){var b,d;b=a.id;b==s&&(J!==s?J={H:"Multiple anonymous defines encountered"}:(b=k.ca())||(J=a));if(b!=s){d=u[b];b in u||(d=k.j(b,q),d=k.D(d.b,b),u[b]=d);if(!z(d))throw Error("duplicate define: "+b);d.ga=!1;k.F(d,a)}}function F(){var a=k.$(arguments);K(a)}var r,q,G,H,m=l.document,O=m&&(m.head||
m.getElementsByTagName("head")[0]),V=O&&O.getElementsByTagName("base")[0]||null,Q={},R={},L={},W="addEventListener"in l?{}:{loaded:1,complete:1},N={},T=N.toString,s,u={},M={},I=!1,J,S=/^\/|^[^:]+:\/\//,U=/(\.)(\.?)(?:$|\/([^\.\/]+.*)?)/g,X=/\/\*[\s\S]*?\*\/|\/\/.*?[\n\r]/g,Y=/require\s*\(\s*(["'])(.*?[^\\])\1\s*\)|[^\\]?(["'])/g,Z=/\s*,\s*/,P,k;k={m:function(a,b,d){var c;a=D(a,b);if("."==a.charAt(0))return a;c=C(a);a=(b=c.d)||c.g;a in d.c&&(a=d.c[a].L||a);b&&(0>b.indexOf("/")&&!(b in d.c)&&(a=x(d.O)+
"/"+b),a=a+"!"+c.g);return a},k:function(a,b,d,c){function f(b,c){var d,g;d=k.m(b,n.id,a);if(!c)return d;g=C(d);if(!g.d)return d;d=u[g.d];g.g="normalize"in d?d.normalize(g.g,f,n.b)||"":f(g.g);return g.d+"!"+g.g}function g(b,d,g){var e;e=d&&function(a){d.apply(s,a)};if(v(b,"String")){if(e)throw Error("require(id, callback) not allowed");g=f(b,!0);b=u[g];if(!(g in u))throw Error("Module not resolved: "+g);return(g=z(b)&&b.a)||b}t(k.q(k.k(a,n.id,b,c)),e,g)}var n;n=new E;n.id=b||"";n.da=c;n.G=d;n.b=a;
n.w=g;g.toUrl=function(b){return k.j(f(b,!0),a).url};n.m=f;return n},D:function(a,b,d){var c,f,g;c=k.k(a,b,s,d);f=c.h;g=B(1,function(a){c.p=a;try{return k.U(c)}catch(b){c.f(b)}});c.h=function(a){t(d||I,function(){f(u[c.id]=M[c.url]=g(a))})};c.I=function(a){t(d||I,function(){c.a&&(g(a),c.v(R))})};return c},T:function(a,b,d,c){return k.k(a,d,s,c)},ba:function(a){return a.w},J:function(a){return a.a||(a.a={})},aa:function(a){var b=a.s;b||(b=a.s={id:a.id,uri:k.K(a),exports:k.J(a),config:function(){return a.b}},
b.a=b.exports);return b},K:function(a){return a.url||(a.url=k.C(a.w.toUrl(a.id),a.b))},Q:function(a){var b,d,c,f,g;b="curl";d="define";c=f=l;if(a&&(g=a.overwriteApi||a.na,b=a.apiName||a.ia||b,c=a.apiContext||a.ha||c,d=a.defineName||a.ka||d,f=a.defineContext||a.ja||f,G&&v(G,"Function")&&(l.curl=G),G=null,H&&v(H,"Function")&&(l.define=H),H=null,!g)){if(c[b]&&c[b]!=e)throw Error(b+" already exists");if(f[d]&&f[d]!=F)throw Error(d+" already exists");}c[b]=e;f[d]=F},b:function(a){function b(a,b){var d,
c,n,e,q;for(q in a){n=a[q];v(n,"String")&&(n={path:a[q]});n.name=n.name||q;e=f;c=C(x(n.name));d=c.g;if(c=c.d)e=g[c],e||(e=g[c]=y(f),e.c=y(f.c),e.e=[]),delete a[q];c=n;var r=b,h=void 0;c.path=x(c.path||c.location||"");r&&(h=c.main||"./main","."==h.charAt(0)||(h="./"+h),c.L=D(h,c.name+"/"));c.b=c.config;c.b&&(c.b=y(f,c.b));c.R=d.split("/").length;d?(e.c[d]=c,e.e.push(d)):e.n=k.P(n.path,f)}}function d(a){var b=a.c;a.N=RegExp("^("+a.e.sort(function(a,c){return b[c].R-b[a].R}).join("|").replace(/\/|\./g,
"\\$&")+")(?=\\/|$)");delete a.e}var c,f,g,n;"baseUrl"in a&&(a.n=a.baseUrl);"main"in a&&(a.L=a.main);"preloads"in a&&(a.oa=a.preloads);"pluginPath"in a&&(a.O=a.pluginPath);if("dontAddFileExt"in a||a.i)a.i=RegExp(a.dontAddFileExt||a.i);c=q;f=y(c,a);f.c=y(c.c);g=a.plugins||{};f.plugins=y(c.plugins);f.u=y(c.u,a.u);f.t=y(c.t,a.t);f.e=[];b(a.packages,!0);b(a.paths,!1);for(n in g)a=k.m(n+"!","",f),f.plugins[a.substr(0,a.length-1)]=g[n];g=f.plugins;for(n in g)if(g[n]=y(f,g[n]),a=g[n].e)g[n].e=a.concat(f.e),
d(g[n]);for(n in c.c)f.c.hasOwnProperty(n)||f.e.push(n);d(f);return f},j:function(a,b){var d,c,f,g;d=b.c;f=S.test(a)?a:a.replace(b.N,function(a){c=d[a]||{};g=c.b;return c.path||""});return{b:g||q,url:k.P(f,b)}},P:function(a,b){var d=b.n;return d&&!S.test(a)?x(d)+"/"+a:a},C:function(a,b){return a+((b||q).i.test(a)?"":".js")},r:function(a,b,d){var c=m.createElement("script");c.onload=c.onreadystatechange=function(d){d=d||l.event;if("load"==d.type||W[c.readyState])delete L[a.id],c.onload=c.onreadystatechange=
c.onerror="",b()};c.onerror=function(){d(Error("Syntax or http error: "+a.url))};c.type=a.M||"text/javascript";c.charset="utf-8";c.async=!a.ea;c.src=a.url;L[a.id]=c;O.insertBefore(c,V);return c},V:function(a){var b=[],d;("string"==typeof a?a:a.toSource?a.toSource():a.toString()).replace(X,"").replace(Y,function(a,f,g,e){e?d=d==e?s:d:d||b.push(g);return""});return b},$:function(a){var b,d,c,f,g,e;g=a.length;c=a[g-1];f=v(c,"Function")?c.length:-1;2==g?v(a[0],"Array")?d=a[0]:b=a[0]:3==g&&(b=a[0],d=a[1]);
!d&&0<f&&(e=!0,d=["require","exports","module"].slice(0,f).concat(k.V(c)));return{id:b,p:d||[],A:0<=f?c:function(){return c},o:e}},U:function(a){var b;b=a.A.apply(a.o?a.a:s,a.p);b===s&&a.a&&(b=a.s?a.a=a.s.exports:a.a);return b},F:function(a,b){a.A=b.A;a.o=b.o;a.G=b.p;k.q(a)},q:function(a){function b(a,b,c){e[b]=a;c&&r(a,b)}function d(b,c){var d,f,g,e;d=B(1,function(a){f(a);m(a,c)});f=B(1,function(a){r(a,c)});g=k.X(b,a);(e=z(g)&&g.a)&&f(e);t(g,d,a.f,a.a&&function(a){g.a&&(a==Q?f(g.a):a==R&&d(g.a))})}
function c(){a.h(e)}var f,g,e,q,h,r,m;e=[];g=a.G;q=g.length;0==g.length&&c();r=B(q,b,function(){a.I&&a.I(e)});m=B(q,b,c);for(f=0;f<q;f++)h=g[f],h in P?(m(P[h](a),f,!0),a.a&&a.v(Q)):h?d(h,f):m(s,f,!0);return a},Y:function(a){k.K(a);k.r(a,function(){var b=J;J=s;!1!==a.ga&&(!b||b.H?a.f(Error(b&&b.H||"define() missing or duplicated: "+a.url)):k.F(a,b))},a.f);return a},X:function(a,b){var d,c,f,g,e,h,r,m,w,l,p,s;d=b.m;c=b.da;f=b.b||q;e=d(a);e in u?h=e:(g=C(e),m=g.g,h=g.d||m,w=k.j(h,f));if(!(e in u))if(s=
k.j(m,f).b,g.d)r=h;else if(r=s.moduleLoader||s.ma||s.loader||s.la)m=h,h=r,w=k.j(r,f);h in u?l=u[h]:w.url in M?l=u[h]=M[w.url]:(l=k.D(s,h,c),l.url=k.C(w.url,w.b),u[h]=M[w.url]=l,k.Y(l));h==r&&(g.d&&f.plugins[g.d]&&(s=f.plugins[g.d]),p=new E,t(l,function(a){var b,f,g;g=a.dynamic;m="normalize"in a?a.normalize(m,d,l.b)||"":d(m);f=r+"!"+m;b=u[f];if(!(f in u)){b=k.T(s,f,m,c);g||(u[f]=b);var e=function(a){g||(u[f]=a);b.h(a)};e.resolve=e;e.reject=e.error=b.f;a.load(m,b.w,e,s)}p!=b&&t(b,p.h,p.f,p.v)},p.f));
return p||l},ca:function(){var a;if(!v(l.opera,"Opera"))for(var b in L)if("interactive"==L[b].readyState){a=b;break}return a},Z:function(a){var b=0,d,c;for(d=m&&(m.scripts||m.getElementsByTagName("script"));d&&(c=d[b++]);)if(a(c))return c},W:function(){var a,b="";(a=k.Z(function(a){(a=a.getAttribute("data-curl-run"))&&(b=a);return a}))&&a.setAttribute("data-curl-run","");return b},S:function(){function a(){k.r({url:c.shift()},b,b)}function b(){r&&(c.length?(k.l(d),a()):d("run.js script did not run."))}
function d(a){throw Error(a||"Primary run.js failed. Trying fallback.");}var c=r.split(Z);c.length&&a()},l:function(a){setTimeout(a,0)}};P={require:k.ba,exports:k.J,module:k.aa};e.version="0.8.10";e.config=w;F.amd={plugins:!0,jQuery:!0,curl:"0.8.10"};q={n:"",O:"curl/plugin",i:/\?|\.js\b/,u:{},t:{},plugins:{},c:{},N:/$^/};G=l.curl;H=l.define;G&&v(G,"Object")?(l.curl=s,w(G)):k.Q();(r=k.W())&&k.l(k.S);u.curl=e;u["curl/_privileged"]={core:k,cache:u,config:function(){return q},_define:K,_curl:e,Promise:E}})(this.window||
"undefined"!=typeof global&&global||this);
(function(l,p){function v(){if(!p.body)return!1;F||(F=p.createTextNode(""));try{return p.body.removeChild(p.body.appendChild(F)),F=K,!0}catch(e){return!1}}function x(){var r;r=A[p[C]]&&v();if(!z&&r){z=!0;for(clearTimeout(h);e=w.pop();)e();E&&(p[C]="complete");for(var q;q=y.shift();)q()}return r}function D(){x();z||(h=setTimeout(D,t))}var C="readyState",A={loaded:1,interactive:1,complete:1},y=[],E=p&&"string"!=typeof p[C],z=!1,t=10,B,e,w=[],h,K,F;B="addEventListener"in l?function(e,h){e.addEventListener(h,
x,!1);return function(){e.removeEventListener(h,x,!1)}}:function(e,h){e.attachEvent("on"+h,x);return function(){e.detachEvent(h,x)}};p&&!x()&&(w=[B(l,"load"),B(p,"readystatechange"),B(l,"DOMContentLoaded")],h=setTimeout(D,t));define("curl/domReady",function(){function e(h){z?h():y.push(h)}e.then=e;e.amd=!0;return e})})(this,this.document);
(function(l,p,v){define("curl/plugin/js",["curl/_privileged"],function(l){function D(e,w,h){function p(){r||(t<new Date?h():setTimeout(p,10))}var t,r,q;t=(new Date).valueOf()+(e.fa||3E5);h&&e.a&&setTimeout(p,10);q=l.core.r(e,function(){r=!0;e.a&&(e.B=v(e.a));!e.a||e.B?w(q):h()},function(e){r=!0;h(e)})}function C(e,l){D(e,function(){var h=y.shift();t=0<y.length;h&&C.apply(null,h);l.h(e.B||!0)},function(e){l.f(e)})}var A={},y=[],E=p&&!0==p.createElement("script").async,z,t,B=/\?|\.js\b/;z=l.Promise;
return{dynamic:!0,normalize:function(e,l){var h=e.indexOf("!");return 0<=h?l(e.substr(0,h))+e.substr(h):l(e)},load:function(e,l,h,p){function v(e){(h.error||function(e){throw e;})(e)}var r,q,x,H,m;r=0<e.indexOf("!order");q=e.indexOf("!exports=");x=0<q?e.substr(q+9):p.a;H="prefetch"in p?p.prefetch:!0;e=r||0<q?e.substr(0,e.indexOf("!")):e;q=(q=p.dontAddFileExt||p.i)?RegExp(q):B;m=l.toUrl(e);q.test(m)||(m=m.lastIndexOf(".")<=m.lastIndexOf("/")?m+".js":m);m in A?A[m]instanceof z?A[m].then(h,v):h(A[m]):
(e={name:e,url:m,ea:r,a:x,fa:p.timeout},A[m]=l=new z,l.then(function(e){A[m]=e;h(e)},v),r&&!E&&t?(y.push([e,l]),H&&(e.M="text/cache",D(e,function(e){e&&e.parentNode.removeChild(e)},function(){}),e.M="")):(t=t||r,C(e,l)))},cramPlugin:"../cram/js"}})})(this,this.document,function(l){try{return eval(l)}catch(p){}});define("curl/plugin/domReady",["../domReady"],function(l){return{load:function(p,v,x){l(x)}}});
}).call(this);

!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("Promise",e):"undefined"!=typeof window?window.Promise=e():"undefined"!=typeof global?global.Promise=e():"undefined"!=typeof self&&(self.Promise=e())}(function(){var e;return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){var r=e("../lib/decorators/unhandledRejection"),i=r(e("../lib/Promise"));t.exports="undefined"!=typeof global?global.Promise=i:"undefined"!=typeof self?self.Promise=i:i},{"../lib/Promise":2,"../lib/decorators/unhandledRejection":4}],2:[function(t,n,r){!function(e){"use strict";e(function(e){var t=e("./makePromise"),n=e("./Scheduler"),r=e("./env").asap;return t({scheduler:new n(r)})})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{"./Scheduler":3,"./env":5,"./makePromise":7}],3:[function(t,n,r){!function(e){"use strict";e(function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e})}("function"==typeof e&&e.amd?e:function(e){n.exports=e()})},{}],4:[function(t,n,r){!function(e){"use strict";e(function(e){function t(e){throw e}function n(){}var r=e("../env").setTimer,i=e("../format");return function(e){function o(e){e.handled||(h.push(e),l("Potentially unhandled rejection ["+e.id+"] "+i.formatError(e.value)))}function s(e){var t=h.indexOf(e);t>=0&&(h.splice(t,1),f("Handled previous rejection ["+e.id+"] "+i.formatObject(e.value)))}function a(e,t){d.push(e,t),null===p&&(p=r(u,0))}function u(){for(p=null;d.length>0;)d.shift()(d.shift())}var c,l=n,f=n;"undefined"!=typeof console&&(c=console,l="undefined"!=typeof c.error?function(e){c.error(e)}:function(e){c.log(e)},f="undefined"!=typeof c.info?function(e){c.info(e)}:function(e){c.log(e)}),e.onPotentiallyUnhandledRejection=function(e){a(o,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){a(s,e)},e.onFatalRejection=function(e){a(t,e.value)};var d=[],h=[],p=null;return e}})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{"../env":5,"../format":6}],5:[function(t,n,r){!function(e){"use strict";e(function(e){function t(){return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)}function n(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function r(e){function t(){var e=n;n=void 0,e()}var n,r=document.createTextNode(""),i=new e(t);i.observe(r,{characterData:!0});var o=0;return function(e){n=e,r.data=o^=1}}var i,o="undefined"!=typeof setTimeout&&setTimeout,s=function(e,t){return setTimeout(e,t)},a=function(e){return clearTimeout(e)},u=function(e){return o(e,0)};if(t())u=function(e){return process.nextTick(e)};else if(i=n())u=r(i);else if(!o){var c=e,l=c("vertx");s=function(e,t){return l.setTimer(t,e)},a=l.cancelTimer,u=l.runOnLoop||l.runOnContext}return{setTimer:s,clearTimer:a,asap:u}})}("function"==typeof e&&e.amd?e:function(e){n.exports=e(t)})},{}],6:[function(t,n,r){!function(e){"use strict";e(function(){function e(e){var n="object"==typeof e&&null!==e&&e.stack?e.stack:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"}function t(e){var t=String(e);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=n(e,t)),t}function n(e,t){try{return JSON.stringify(e)}catch(n){return t}}return{formatError:e,formatObject:t,tryStringify:n}})}("function"==typeof e&&e.amd?e:function(e){n.exports=e()})},{}],7:[function(t,n,r){!function(e){"use strict";e(function(){return function(e){function t(e,t){this._handler=e===b?t:n(e)}function n(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}function r(e){i.notify(e)}var i=new x;try{e(t,n,r)}catch(o){n(o)}return i}function r(e){return L(e)?e:new t(b,new j(g(e)))}function i(e){return new t(b,new j(new E(e)))}function o(){return Y}function s(){return new t(b,new x)}function a(e,t){var n=new x(e.receiver,e.join().context);return new t(b,n)}function u(e){return l(W,null,e)}function c(e,t){return l(H,e,t)}function l(e,n,r){function i(t,i,s){s.resolved||f(r,o,t,e(n,i,t),s)}function o(e,t,n){l[e]=t,0===--c&&n.become(new S(l))}for(var s,a="function"==typeof n?i:o,u=new x,c=r.length>>>0,l=new Array(c),d=0;d<r.length&&!u.resolved;++d)s=r[d],void 0!==s||d in r?f(r,a,d,s,u):--c;return 0===c&&u.become(new S(l)),new t(b,u)}function f(e,t,n,r,i){if(q(r)){var o=v(r),s=o.state();0===s?o.fold(t,n,void 0,i):s>0?t(n,o.value,i):(i.become(o),d(e,n+1,o))}else t(n,r,i)}function d(e,t,n){for(var r=t;r<e.length;++r)h(g(e[r]),n)}function h(e,t){if(e!==t){var n=e.state();0===n?e.visit(e,void 0,e._unreport):0>n&&e._unreport()}}function p(e){return"object"!=typeof e||null===e?i(new TypeError("non-iterable passed to race()")):0===e.length?o():1===e.length?r(e[0]):m(e)}function m(e){var n,r,i,o=new x;for(n=0;n<e.length;++n)if(r=e[n],void 0!==r||n in e){if(i=g(r),0!==i.state()){o.become(i),d(e,n+1,i);break}i.visit(o,o.resolve,o.reject)}return new t(b,o)}function g(e){return L(e)?e._handler.join():q(e)?y(e):new S(e)}function v(e){return L(e)?e._handler.join():y(e)}function y(e){try{var t=e.then;return"function"==typeof t?new k(t,e):new S(e)}catch(n){return new E(n)}}function b(){}function w(){}function x(e,n){t.createContext(this,n),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function j(e){this.handler=e}function k(e,t){x.call(this),Q.enqueue(new P(e,t,this))}function S(e){t.createContext(this),this.value=e}function E(e){t.createContext(this),this.id=++K,this.value=e,this.handled=!1,this.reported=!1,this._report()}function C(e,t){this.rejection=e,this.context=t}function A(e){this.rejection=e}function O(){return new E(new TypeError("Promise cycle"))}function _(e,t){this.continuation=e,this.handler=t}function T(e,t){this.handler=t,this.value=e}function P(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function R(e,t,n,r,i){try{e.call(t,n,r,i)}catch(o){r(o)}}function N(e,t,n,r){this.f=e,this.z=t,this.c=n,this.to=r,this.resolver=G,this.receiver=this}function L(e){return e instanceof t}function q(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function I(e,n,r,i){return"function"!=typeof e?i.become(n):(t.enterContext(n),F(e,n.value,r,i),void t.exitContext())}function M(e,n,r,i,o){return"function"!=typeof e?o.become(r):(t.enterContext(r),$(e,n,r.value,i,o),void t.exitContext())}function U(e,n,r,i,o){return"function"!=typeof e?o.notify(n):(t.enterContext(r),D(e,n,i,o),void t.exitContext())}function H(e,t,n){try{return e(t,n)}catch(r){return i(r)}}function F(e,t,n,r){try{r.become(g(e.call(n,t)))}catch(i){r.become(new E(i))}}function $(e,t,n,r,i){try{e.call(r,t,n,i)}catch(o){i.become(new E(o))}}function D(e,t,n,r){try{r.notify(e.call(n,t))}catch(i){r.notify(i)}}function B(e,t){t.prototype=X(e.prototype),t.prototype.constructor=t}function W(e,t){return t}function z(){}function V(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(e,t){return"unhandledRejection"===e?process.emit(e,t.value,t):process.emit(e,t)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(e,t,n){var r=!1;try{var i=new n("unhandledRejection");r=i instanceof n}catch(o){}return r?function(e,r){var i=new n(e,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!t.dispatchEvent(i)}:e}(z,self,CustomEvent):z}var Q=e.scheduler,J=V(),X=Object.create||function(e){function t(){}return t.prototype=e,new t};t.resolve=r,t.reject=i,t.never=o,t._defer=s,t._handler=g,t.prototype.then=function(e,t,n){var r=this._handler,i=r.join().state();if("function"!=typeof e&&i>0||"function"!=typeof t&&0>i)return new this.constructor(b,r);var o=this._beget(),s=o._handler;return r.chain(s,r.receiver,e,t,n),o},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype._beget=function(){return a(this._handler,this.constructor)},t.all=u,t.race=p,t._traverse=c,t._visitRemaining=d,b.prototype.when=b.prototype.become=b.prototype.notify=b.prototype.fail=b.prototype._unreport=b.prototype._report=z,b.prototype._state=0,b.prototype.state=function(){return this._state},b.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},b.prototype.chain=function(e,t,n,r,i){this.when({resolver:e,receiver:t,fulfilled:n,rejected:r,progress:i})},b.prototype.visit=function(e,t,n,r){this.chain(G,e,t,n,r)},b.prototype.fold=function(e,t,n,r){this.when(new N(e,t,n,r))},B(b,w),w.prototype.become=function(e){e.fail()};var G=new w;B(b,x),x.prototype._state=0,x.prototype.resolve=function(e){this.become(g(e))},x.prototype.reject=function(e){this.resolved||this.become(new E(e))},x.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=O();return e},x.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},x.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&Q.enqueue(this),void 0!==this.context&&e._report(this.context))},x.prototype.when=function(e){this.resolved?Q.enqueue(new _(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},x.prototype.notify=function(e){this.resolved||Q.enqueue(new T(e,this))},x.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},x.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},x.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},B(b,j),j.prototype.when=function(e){Q.enqueue(new _(e,this))},j.prototype._report=function(e){this.join()._report(e)},j.prototype._unreport=function(){this.join()._unreport()},B(x,k),B(b,S),S.prototype._state=1,S.prototype.fold=function(e,t,n,r){M(e,t,this,n,r)},S.prototype.when=function(e){I(e.fulfilled,this,e.receiver,e.resolver)};var K=0;B(b,E),E.prototype._state=-1,E.prototype.fold=function(e,t,n,r){r.become(this)},E.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),I(e.rejected,this,e.receiver,e.resolver)},E.prototype._report=function(e){Q.afterQueue(new C(this,e))},E.prototype._unreport=function(){this.handled||(this.handled=!0,Q.afterQueue(new A(this)))},E.prototype.fail=function(e){this.reported=!0,J("unhandledRejection",this),t.onFatalRejection(this,void 0===e?this.context:e)},C.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,J("unhandledRejection",this.rejection)||t.onPotentiallyUnhandledRejection(this.rejection,this.context))},A.prototype.run=function(){this.rejection.reported&&(J("rejectionHandled",this.rejection)||t.onPotentiallyUnhandledRejectionHandled(this.rejection))},t.createContext=t.enterContext=t.exitContext=t.onPotentiallyUnhandledRejection=t.onPotentiallyUnhandledRejectionHandled=t.onFatalRejection=z;var Z=new b,Y=new t(b,Z);return _.prototype.run=function(){this.handler.join().when(this.continuation)},T.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)t=e[n],U(t.progress,this.value,this.handler,t.receiver,t.resolver)},P.prototype.run=function(){function e(e){r.resolve(e)}function t(e){r.reject(e)}function n(e){r.notify(e)}var r=this.resolver;R(this._then,this.thenable,e,t,n)},N.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},N.prototype.rejected=function(e){this.to.reject(e)},N.prototype.progress=function(e){this.to.notify(e)},t}})}("function"==typeof e&&e.amd?e:function(e){n.exports=e()})},{}]},{},[1])(1)}),define("lodash/internals/isNative",[],function(){function e(e){return"function"==typeof e&&r.test(e)}var t=Object.prototype,n=t.toString,r=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return e}),define("lodash/internals/objectTypes",[],function(){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return e}),define("lodash/objects/isObject",["../internals/objectTypes"],function(e){function t(t){return!(!t||!e[typeof t])}return t}),define("lodash/utilities/noop",[],function(){function e(){}return e}),define("lodash/internals/baseCreate",["./isNative","../objects/isObject","../utilities/noop"],function(e,t,n){function r(e,n){return t(e)?i(e):{}}var i=e(i=Object.create)&&i;return i||(r=function(){function e(){}return function(n){if(t(n)){e.prototype=n;var r=new e;e.prototype=null}return r||window.Object()}}()),r}),define("lodash/internals/setBindData",["./isNative","../utilities/noop"],function(e,t){var n={configurable:!1,enumerable:!1,value:null,writable:!1},r=function(){try{var t={},n=e(n=Object.defineProperty)&&n,r=n(t,t,t)&&n}catch(i){}return r}(),i=r?function(e,t){n.value=t,r(e,"__bindData__",n)}:t;return i}),define("lodash/internals/slice",[],function(){function e(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(0>i?0:i);++r<i;)o[r]=e[t+r];return o}return e}),define("lodash/internals/baseBind",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,t,n,r){function i(i){function o(){if(u){var n=r(u);s.apply(n,arguments)}if(this instanceof o){var i=e(a.prototype),l=a.apply(i,n||arguments);return t(l)?l:i}return a.apply(c,n||arguments)}var a=i[0],u=i[2],c=i[4];return n(o,i),o}var o=[],s=o.push;return i}),define("lodash/internals/baseCreateWrapper",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,t,n,r){function i(o){function a(){var n=p?d:this;if(l){var o=r(l);s.apply(o,arguments)}if((f||g)&&(o||(o=r(arguments)),f&&s.apply(o,f),g&&o.length<h))return c|=16,i([u,v?c:-4&c,o,null,d,h]);if(o||(o=arguments),m&&(u=n[y]),this instanceof a){n=e(u.prototype);var b=u.apply(n,o);return t(b)?b:n}return u.apply(n,o)}var u=o[0],c=o[1],l=o[2],f=o[3],d=o[4],h=o[5],p=1&c,m=2&c,g=4&c,v=8&c,y=u;return n(a,o),a}var o=[],s=o.push;return i}),define("lodash/objects/isFunction",[],function(){function e(e){return"function"==typeof e}var t="[object Function]",n=Object.prototype,r=n.toString;return e(/x/)&&(e=function(e){return"function"==typeof e&&r.call(e)==t}),e}),define("lodash/internals/createWrapper",["./baseBind","./baseCreateWrapper","../objects/isFunction","./slice"],function(e,t,n,r){function i(o,u,c,l,f,d){var h=1&u,p=2&u,m=4&u,g=16&u,v=32&u;if(!p&&!n(o))throw new TypeError;g&&!c.length&&(u&=-17,g=c=!1),v&&!l.length&&(u&=-33,v=l=!1);var y=o&&o.__bindData__;if(y&&y!==!0)return y=r(y),y[2]&&(y[2]=r(y[2])),y[3]&&(y[3]=r(y[3])),!h||1&y[1]||(y[4]=f),!h&&1&y[1]&&(u|=8),!m||4&y[1]||(y[5]=d),g&&s.apply(y[2]||(y[2]=[]),c),v&&a.apply(y[3]||(y[3]=[]),l),y[1]|=u,i.apply(null,y);var b=1==u||17===u?e:t;return b([o,u,c,l,f,d])}var o=[],s=o.push,a=o.unshift;return i}),define("lodash/support",["./internals/isNative"],function(e){var t=/\bthis\b/,n="[object Arguments]",r="[object Object]",i=[],o=Error.prototype,s=Object.prototype,a=s.toString,u=s.propertyIsEnumerable,c={};return function(){var s=function(){this.x=1},l={0:1,length:1},f=[];s.prototype={valueOf:1,y:1};for(var d in new s)f.push(d);for(d in arguments);c.argsClass=a.call(arguments)==n,c.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),c.enumErrorProps=u.call(o,"message")||u.call(o,"name"),c.enumPrototypes=u.call(s,"prototype"),c.funcDecomp=!e(window.WinRTError)&&t.test(function(){return this}),c.funcNames="string"==typeof Function.name,c.nonEnumArgs=0!=d,c.nonEnumShadows=!/valueOf/.test(f),c.ownLast="x"!=f[0],c.spliceObjects=(i.splice.call(l,0,1),!l[0]),c.unindexedChars="x"[0]+Object("x")[0]!="xx";try{c.nodeClass=!(a.call(document)==r&&!({toString:0}+""))}catch(h){c.nodeClass=!0}}(1),c}),define("lodash/functions/bind",["../internals/createWrapper","../internals/slice","../support"],function(e,t,n){function r(n,r){return arguments.length>2?e(n,17,t(arguments,2),null,r):e(n,1,null,null,r)}return r}),define("lodash/utilities/identity",[],function(){function e(e){return e}return e}),define("lodash/internals/baseCreateCallback",["../functions/bind","../utilities/identity","./setBindData","../support"],function(e,t,n,r){function i(i,u,c){if("function"!=typeof i)return t;if("undefined"==typeof u||!("prototype"in i))return i;var l=i.__bindData__;if("undefined"==typeof l&&(r.funcNames&&(l=!i.name),l=l||!r.funcDecomp,!l)){var f=a.call(i);r.funcNames||(l=!o.test(f)),l||(l=s.test(f),n(i,l))}if(l===!1||l!==!0&&1&l[1])return i;switch(c){case 1:return function(e){return i.call(u,e)};case 2:return function(e,t){return i.call(u,e,t)};case 3:return function(e,t,n){return i.call(u,e,t,n)};case 4:return function(e,t,n,r){return i.call(u,e,t,n,r)}}return e(i,u)}var o=/^\s*function[ \n\r\t]+\w/,s=/\bthis\b/,a=Function.prototype.toString;return i}),define("lodash/internals/indicatorObject",[],function(){var e={};return e}),define("lodash/objects/isArguments",["../support"],function(e){function t(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==n||!1}var n="[object Arguments]",r=Object.prototype,i=r.toString,o=r.hasOwnProperty,s=r.propertyIsEnumerable;return e.argsClass||(t=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&o.call(e,"callee")&&!s.call(e,"callee")||!1}),t}),define("lodash/objects/isArray",["../internals/isNative"],function(e){var t="[object Array]",n=Object.prototype,r=n.toString,i=e(i=Array.isArray)&&i,o=i||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&r.call(e)==t||!1};return o}),define("lodash/objects/isString",[],function(){function e(e){return"string"==typeof e||e&&"object"==typeof e&&r.call(e)==t||!1}var t="[object String]",n=Object.prototype,r=n.toString;return e}),define("lodash/internals/iteratorTemplate",["../support"],function(e){var t=function(t){var n="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(n+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",e.unindexedChars&&(n+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),n+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):e.nonEnumArgs&&(n+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),e.enumPrototypes&&(n+="\n  var skipProto = typeof iterable == 'function';\n  "),e.enumErrorProps&&(n+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var r=[];if(e.enumPrototypes&&r.push('!(skipProto && index == "prototype")'),e.enumErrorProps&&r.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)n+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",r.length&&(n+="    if ("+r.join(" && ")+") {\n  "),n+=t.loop+";    ",r.length&&(n+="\n    }"),n+="\n  }  ";else if(n+="\n  for (index in iterable) {\n",t.useHas&&r.push("hasOwnProperty.call(iterable, index)"),r.length&&(n+="    if ("+r.join(" && ")+") {\n  "),n+=t.loop+";    ",r.length&&(n+="\n    }"),n+="\n  }    ",e.nonEnumShadows){for(n+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)n+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(n+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),n+=") {\n      "+t.loop+";\n    }      ";n+="\n  }    "}return(t.array||e.nonEnumArgs)&&(n+="\n}"),n+=t.bottom+";\nreturn result"};return t}),define("lodash/internals/createIterator",["./baseCreateCallback","./indicatorObject","../objects/isArguments","../objects/isArray","../objects/isString","./iteratorTemplate","./objectTypes"],function(e,t,n,r,i,o,s){function a(){y.shadowedProps=u,y.array=y.bottom=y.loop=y.top="",y.init="iterable",y.useHas=!0;for(var a,c=0;a=arguments[c];c++)for(var l in a)y[l]=a[l];var f=y.args;y.firstArg=/^[^,]+/.exec(f)[0];var h=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+f+") {\n"+o(y)+"\n}");return h(e,d,b,k,t,n,r,i,y.keys,w,s,S,v,x,j)}var u=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],c="[object Array]",l="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object Number]",m="[object Object]",g="[object RegExp]",v="[object String]",y={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},b=Error.prototype,w=Object.prototype,x=String.prototype,j=w.toString,k=w.hasOwnProperty,S={};return S[c]=S[f]=S[p]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},S[l]=S[v]={constructor:!0,toString:!0,valueOf:!0},S[d]=S[h]=S[g]={constructor:!0,toString:!0},S[m]={constructor:!0},function(){for(var e=u.length;e--;){var t=u[e];for(var n in S)k.call(S,n)&&!k.call(S[n],t)&&(S[n][t]=!1)}}(),a}),define("lodash/internals/shimKeys",["./createIterator"],function(e){var t=e({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"});return t}),define("lodash/objects/keys",["./isArguments","../internals/isNative","./isObject","../internals/shimKeys","../support"],function(e,t,n,r,i){var o=t(o=Object.keys)&&o,s=o?function(t){return n(t)?i.enumPrototypes&&"function"==typeof t||i.nonEnumArgs&&t.length&&e(t)?r(t):o(t):[]}:r;return s}),define("lodash/internals/eachIteratorOptions",["../objects/keys"],function(e){var t={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:e,loop:"if (callback(iterable[index], index, collection) === false) return result"};return t}),define("lodash/internals/baseEach",["./createIterator","./eachIteratorOptions"],function(e,t){var n=e(t);return n}),define("lodash/collections/forEach",["../internals/baseCreateCallback","../internals/baseEach","../objects/isArray"],function(e,t,n){function r(e,r,i){if(r&&"undefined"==typeof i&&n(e))for(var o=-1,s=e.length;++o<s&&r(e[o],o,e)!==!1;);else t(e,r,i);return e}return r}),!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define("domReady",t):this[e]=t()}("domready",function(e){function t(e){for(h=1;e=r.shift();)e()}var n,r=[],i=!1,o=document,s=o.documentElement,a=s.doScroll,u="DOMContentLoaded",c="addEventListener",l="onreadystatechange",f="readyState",d=a?/^loaded|^c/:/^loaded|c/,h=d.test(o[f]);return o[c]&&o[c](u,n=function(){o.removeEventListener(u,n,i),t()},i),a&&o.attachEvent(l,n=function(){/^c/.test(o[f])&&(o.detachEvent(l,n),t())}),e=a?function(t){self!=top?h?t():r.push(t):function(){try{s.doScroll("left")}catch(n){return setTimeout(function(){e(t)},50)}t()}()}:function(e){h?e():r.push(e)}}),define("lodash/internals/forOwnIteratorOptions",["./eachIteratorOptions"],function(e){var t={top:"if (!objectTypes[typeof iterable]) return result;\n"+e.top,array:!1};return t}),define("lodash/objects/forIn",["../internals/createIterator","../internals/eachIteratorOptions","../internals/forOwnIteratorOptions"],function(e,t,n){var r=e(t,n,{useHas:!1});return r}),define("lodash/internals/arrayPool",[],function(){var e=[];return e}),define("lodash/internals/getArray",["./arrayPool"],function(e){function t(){return e.pop()||[]}return t}),define("lodash/internals/isNode",[],function(){function e(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}return e}),define("lodash/internals/maxPoolSize",[],function(){var e=40;return e}),define("lodash/internals/releaseArray",["./arrayPool","./maxPoolSize"],function(e,t){function n(n){n.length=0,e.length<t&&e.push(n)}return n}),define("lodash/internals/baseIsEqual",["../objects/forIn","./getArray","../objects/isArguments","../objects/isFunction","./isNode","./objectTypes","./releaseArray","../support"],function(e,t,n,r,i,o,s,a){function u(v,w,x,j,k,S){if(x){var E=x(v,w);if("undefined"!=typeof E)return!!E}if(v===w)return 0!==v||1/v==1/w;var C=typeof v,A=typeof w;if(!(v!==v||v&&o[C]||w&&o[A]))return!1;if(null==v||null==w)return v===w;var O=y.call(v),_=y.call(w);if(O==c&&(O=p),_==c&&(_=p),O!=_)return!1;switch(O){case f:case d:return+v==+w;case h:return v!=+v?w!=+w:0==v?1/v==1/w:v==+w;case m:case g:return v==String(w)}var T=O==l;if(!T){var P=b.call(v,"__wrapped__"),R=b.call(w,"__wrapped__");if(P||R)return u(P?v.__wrapped__:v,R?w.__wrapped__:w,x,j,k,S);if(O!=p||!a.nodeClass&&(i(v)||i(w)))return!1;var N=!a.argsObject&&n(v)?Object:v.constructor,L=!a.argsObject&&n(w)?Object:w.constructor;if(N!=L&&!(r(N)&&N instanceof N&&r(L)&&L instanceof L)&&"constructor"in v&&"constructor"in w)return!1}var q=!k;k||(k=t()),S||(S=t());for(var I=k.length;I--;)if(k[I]==v)return S[I]==w;var M=0;if(E=!0,k.push(v),S.push(w),T){if(I=v.length,M=w.length,E=M==I,E||j)for(;M--;){var U=I,H=w[M];if(j)for(;U--&&!(E=u(v[U],H,x,j,k,S)););else if(!(E=u(v[M],H,x,j,k,S)))break}}else e(w,function(e,t,n){return b.call(n,t)?(M++,E=b.call(v,t)&&u(v[t],e,x,j,k,S)):void 0}),E&&!j&&e(v,function(e,t,n){return b.call(n,t)?E=--M>-1:void 0});return k.pop(),S.pop(),q&&(s(k),s(S)),E}var c="[object Arguments]",l="[object Array]",f="[object Boolean]",d="[object Date]",h="[object Number]",p="[object Object]",m="[object RegExp]",g="[object String]",v=Object.prototype,y=v.toString,b=v.hasOwnProperty;return u}),define("lodash/utilities/property",[],function(){function e(e){return function(t){return t[e]}}return e}),define("lodash/functions/createCallback",["../internals/baseCreateCallback","../internals/baseIsEqual","../objects/isObject","../objects/keys","../utilities/property"],function(e,t,n,r,i){function o(o,s,a){var u=typeof o;if(null==o||"function"==u)return e(o,s,a);if("object"!=u)return i(o);var c=r(o),l=c[0],f=o[l];return 1!=c.length||f!==f||n(f)?function(e){for(var n=c.length,r=!1;n--&&(r=t(e[c[n]],o[c[n]],null,!0)););return r}:function(e){var t=e[l];return f===t&&(0!==f||1/f==1/t)}}return o}),define("lodash/collections/map",["../internals/baseEach","../functions/createCallback","../objects/isArray"],function(e,t,n){function r(r,i,o){var s=-1,a=r?r.length:0,u=Array("number"==typeof a?a:0);if(i=t(i,o,3),n(r))for(;++s<a;)u[s]=i(r[s],s,r);else e(r,function(e,t,n){u[++s]=i(e,t,n)});return u}return r}),function(e,t){"use strict";function n(e,t){var n,r;t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=document.createEventObject(),n.eventType=e);for(r in t)c(t,r)&&(n[r]=t[r]);if(document.createEvent)document.dispatchEvent(n);else try{document.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(i){}}function r(e){this.name="RavenConfigError",this.message=e}function i(e){var t=D.exec(e),n={},i=7;try{for(;i--;)n[$[i]]=t[i]||""}catch(o){throw new r("Invalid DSN: "+e)}if(n.pass)throw new r("Do not specify your private key in the DSN!");return n}function o(e){return"undefined"==typeof e}function s(e){return"function"==typeof e}function a(e){return"string"==typeof e}function u(e){for(var t in e)return!1;return!0}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){var n,r;if(o(e.length))for(n in e)c(e,n)&&t.call(null,n,e[n]);else if(r=e.length)for(n=0;r>n;n++)t.call(null,n,e[n])}function f(){q="?sentry_version=4&sentry_client=raven-js/"+F.VERSION+"&sentry_key="+N}function d(e,t){var r=[];e.stack&&e.stack.length&&l(e.stack,function(e,t){var n=h(t);n&&r.push(n)}),n("handle",{stackInfo:e,options:t}),m(e.name,e.message,e.url,e.lineno,r,t)}function h(e){if(e.url){var t,n={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"},r=p(e);if(r){var i=["pre_context","context_line","post_context"];for(t=3;t--;)n[i[t]]=r[t]}return n.in_app=!(!U.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n["function"])||/raven\.(min\.)?js$/.test(n.filename)),n}}function p(e){if(e.context&&U.fetchContext){for(var t=e.context,n=~~(t.length/2),r=t.length,i=!1;r--;)if(t[r].length>300){i=!0;break}if(i){if(o(e.column))return;return[[],t[n].substr(e.column,50),[]]}return[t.slice(0,n),t[n],t.slice(n+1)]}}function m(e,t,n,r,i,o){var s,a;t+="",("Error"!==e||t)&&(U.ignoreErrors.test(t)||(i&&i.length?(n=i[0].filename||n,i.reverse(),s={frames:i}):n&&(s={frames:[{filename:n,lineno:r,in_app:!0}]}),t=v(t,100),U.ignoreUrls&&U.ignoreUrls.test(n)||(!U.whitelistUrls||U.whitelistUrls.test(n))&&(a=r?t+" at "+r:t,b(g({exception:{type:e,value:t},stacktrace:s,culprit:n,message:a},o)))))}function g(e,t){return t?(l(t,function(t,n){e[t]=n}),e):e}function v(e,t){return e.length<=t?e:e.substr(0,t)+"â€¦"}function y(){var e={url:document.location.href,headers:{"User-Agent":navigator.userAgent}};return document.referrer&&(e.headers.Referer=document.referrer),e}function b(e){x()&&(e=g({project:L,logger:U.logger,site:U.site,platform:"javascript",request:y()},e),e.tags=g(U.tags,e.tags),e.extra=g(U.extra,e.extra),u(e.tags)&&delete e.tags,u(e.extra)&&delete e.extra,R&&(e.user=R),s(U.dataCallback)&&(e=U.dataCallback(e)),(!s(U.shouldSendCallback)||U.shouldSendCallback(e))&&(T=e.event_id||(e.event_id=k()),w(e)))}function w(e){var t=new Image,r=P+q+"&sentry_data="+encodeURIComponent(JSON.stringify(e));t.onload=function(){n("success",{data:e,src:r})},t.onerror=t.onabort=function(){n("failure",{data:e,src:r})},t.src=r}function x(){return M?P?!0:(S("error","Error: Raven has not been configured."),!1):!1}function j(e){for(var t,n=[],r=0,i=e.length;i>r;r++)t=e[r],a(t)?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function k(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}function S(t,n){e.console&&console[t]&&F.debug&&console[t](n)}function E(){var t=e.RavenConfig;t&&F.config(t.dsn,t.config).install()}var C={remoteFetching:!1,collectWindowErrors:!0,linesOfContext:7},A=[].slice,O="?";C.wrap=function(e){function t(){try{return e.apply(this,arguments)}catch(t){throw C.report(t),t}}return t},C.report=function(){function n(e){a(),p.push(e)}function r(e){for(var t=p.length-1;t>=0;--t)p[t]===e&&p.splice(t,1)}function i(){u(),p=[]}function o(e,t){var n=null;if(!t||C.collectWindowErrors){for(var r in p)if(c(p,r))try{p[r].apply(null,[e].concat(A.call(arguments,2)))}catch(i){n=i}if(n)throw n}}function s(e,t,n,r,i){var s=null;if(v)C.computeStackTrace.augmentStackTraceWithInitialElement(v,t,n,e),l();else if(i)s=C.computeStackTrace(i),o(s,!0);else{var a={url:t,line:n,column:r};a.func=C.computeStackTrace.guessFunctionName(a.url,a.line),
a.context=C.computeStackTrace.gatherContext(a.url,a.line),s={message:e,url:document.location.href,stack:[a]},o(s,!0)}return d?d.apply(this,arguments):!1}function a(){h||(d=e.onerror,e.onerror=s,h=!0)}function u(){h&&(e.onerror=d,h=!1,d=t)}function l(){var e=v,t=m;m=null,v=null,g=null,o.apply(null,[e,!1].concat(t))}function f(t,n){var r=A.call(arguments,1);if(v){if(g===t)return;l()}var i=C.computeStackTrace(t);if(v=i,g=t,m=r,e.setTimeout(function(){g===t&&l()},i.incomplete?2e3:0),n!==!1)throw t}var d,h,p=[],m=null,g=null,v=null;return f.subscribe=n,f.unsubscribe=r,f.uninstall=i,f}(),C.computeStackTrace=function(){function t(t){if(!C.remoteFetching)return"";try{var n=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}},r=n();return r.open("GET",t,!1),r.send(""),r.responseText}catch(i){return""}}function n(e){if(!a(e))return[];if(!c(x,e)){var n="";-1!==e.indexOf(document.domain)&&(n=t(e)),x[e]=n?n.split("\n"):[]}return x[e]}function r(e,t){var r,i=/function ([^(]*)\(([^)]*)\)/,s=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,a="",u=10,c=n(e);if(!c.length)return O;for(var l=0;u>l;++l)if(a=c[t-l]+a,!o(a)){if(r=s.exec(a))return r[1];if(r=i.exec(a))return r[1]}return O}function i(e,t){var r=n(e);if(!r.length)return null;var i=[],s=Math.floor(C.linesOfContext/2),a=s+C.linesOfContext%2,u=Math.max(0,t-s-1),c=Math.min(r.length,t+a-1);t-=1;for(var l=u;c>l;++l)o(r[l])||i.push(r[l]);return i.length>0?i:null}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function u(e){return s(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function l(e,t){for(var r,i,o=0,s=t.length;s>o;++o)if((r=n(t[o])).length&&(r=r.join("\n"),i=e.exec(r)))return{url:t[o],line:r.substring(0,i.index).split("\n").length,column:i.index-r.lastIndexOf("\n",i.index)-1};return null}function f(e,t,r){var i,o=n(t),a=new RegExp("\\b"+s(e)+"\\b");return r-=1,o&&o.length>r&&(i=a.exec(o[r]))?i.index:null}function d(t){for(var n,r,i,o,a=[e.location.href],c=document.getElementsByTagName("script"),f=""+t,d=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,h=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=0;p<c.length;++p){var m=c[p];m.src&&a.push(m.src)}if(i=d.exec(f)){var g=i[1]?"\\s+"+i[1]:"",v=i[2].split(",").join("\\s*,\\s*");n=s(i[3]).replace(/;$/,";?"),r=new RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else r=new RegExp(s(f).replace(/\s+/g,"\\s+"));if(o=l(r,a))return o;if(i=h.exec(f)){var y=i[1];if(n=u(i[2]),r=new RegExp("on"+y+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),o=l(r,a[0]))return o;if(r=new RegExp(n),o=l(r,a))return o}return null}function h(e){if(!e.stack)return null;for(var t,n,s=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|https?|chrome-extension):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=/^\s*(\S*)(?:\((.*?)\))?@((?:file|https?|chrome).*?):(\d+)(?::(\d+))?\s*$/i,u=e.stack.split("\n"),c=[],l=/^(.*) is undefined$/.exec(e.message),d=0,h=u.length;h>d;++d){if(t=a.exec(u[d]))n={url:t[3],func:t[1]||O,args:t[2]?t[2].split(","):"",line:+t[4],column:t[5]?+t[5]:null};else{if(!(t=s.exec(u[d])))continue;n={url:t[2],func:t[1]||O,line:+t[3],column:t[4]?+t[4]:null}}!n.func&&n.line&&(n.func=r(n.url,n.line)),n.line&&(n.context=i(n.url,n.line)),c.push(n)}return c.length?(c[0].line&&!c[0].column&&l?c[0].column=f(l[1],c[0].url,c[0].line):c[0].column||o(e.columnNumber)||(c[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:document.location.href,stack:c}):null}function p(e){for(var t,n=e.stacktrace,o=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,s=n.split("\n"),a=[],u=0,c=s.length;c>u;u+=2)if(t=o.exec(s[u])){var l={line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[],url:t[6]};if(!l.func&&l.line&&(l.func=r(l.url,l.line)),l.line)try{l.context=i(l.url,l.line)}catch(f){}l.context||(l.context=[s[u+1]]),a.push(l)}return a.length?{name:e.name,message:e.message,url:document.location.href,stack:a}:null}function m(t){var o=t.message.split("\n");if(o.length<4)return null;var s,a,f,d,h=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,m=/^\s*Line (\d+) of function script\s*$/i,g=[],v=document.getElementsByTagName("script"),y=[];for(a in v)c(v,a)&&!v[a].src&&y.push(v[a]);for(a=2,f=o.length;f>a;a+=2){var b=null;if(s=h.exec(o[a]))b={url:s[2],func:s[3],line:+s[1]};else if(s=p.exec(o[a])){b={url:s[3],func:s[4]};var w=+s[1],x=y[s[2]-1];if(x&&(d=n(b.url))){d=d.join("\n");var j=d.indexOf(x.innerText);j>=0&&(b.line=w+d.substring(0,j).split("\n").length)}}else if(s=m.exec(o[a])){var k=e.location.href.replace(/#.*$/,""),S=s[1],E=new RegExp(u(o[a+1]));d=l(E,[k]),b={url:k,line:d?d.line:S,func:""}}if(b){b.func||(b.func=r(b.url,b.line));var C=i(b.url,b.line),A=C?C[Math.floor(C.length/2)]:null;C&&A.replace(/^\s*/,"")===o[a+1].replace(/^\s*/,"")?b.context=C:b.context=[o[a+1]],g.push(b)}}return g.length?{name:t.name,message:o[0],url:document.location.href,stack:g}:null}function g(e,t,n,o){var s={url:t,line:n};if(s.url&&s.line){e.incomplete=!1,s.func||(s.func=r(s.url,s.line)),s.context||(s.context=i(s.url,s.line));var a=/ '([^']+)' /.exec(o);if(a&&(s.column=f(a[1],s.url,s.line)),e.stack.length>0&&e.stack[0].url===s.url){if(e.stack[0].line===s.line)return!1;if(!e.stack[0].line&&e.stack[0].func===s.func)return e.stack[0].line=s.line,e.stack[0].context=s.context,!1}return e.stack.unshift(s),e.partial=!0,!0}return e.incomplete=!0,!1}function v(e,t){for(var n,i,o,s=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],u={},c=!1,l=v.caller;l&&!c;l=l.caller)if(l!==y&&l!==C.report){if(i={url:null,func:O,line:null,column:null},l.name?i.func=l.name:(n=s.exec(l.toString()))&&(i.func=n[1]),o=d(l)){i.url=o.url,i.line=o.line,i.func===O&&(i.func=r(i.url,i.line));var h=/ '([^']+)' /.exec(e.message||e.description);h&&(i.column=f(h[1],o.url,o.line))}u[""+l]?c=!0:u[""+l]=!0,a.push(i)}t&&a.splice(0,t);var p={name:e.name,message:e.message,url:document.location.href,stack:a};return g(p,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),p}function y(e,t){var n=null;t=null==t?0:+t;try{if(n=p(e))return n}catch(r){if(w)throw r}try{if(n=h(e))return n}catch(r){if(w)throw r}try{if(n=m(e))return n}catch(r){if(w)throw r}try{if(n=v(e,t+1))return n}catch(r){if(w)throw r}return{}}function b(e){e=(null==e?0:+e)+1;try{throw new Error}catch(t){return y(t,e+1)}}var w=!1,x={};return y.augmentStackTraceWithInitialElement=g,y.guessFunctionName=r,y.gatherContext=i,y.ofCaller=b,y}();var _,T,P,R,N,L,q,I=e.Raven,M=!(!e.JSON||!e.JSON.stringify),U={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:!0,tags:{},extra:{}},H=!1,F={VERSION:"1.1.16",debug:!0,noConflict:function(){return e.Raven=I,F},config:function(e,t){if(P)return S("error","Error: Raven has already been configured"),F;if(!e)return F;var n=i(e),r=n.path.lastIndexOf("/"),o=n.path.substr(1,r);return t&&l(t,function(e,t){U[e]=t}),U.ignoreErrors.push("Script error."),U.ignoreErrors.push("Script error"),U.ignoreErrors.push("Javascript error: Script error on line 0"),U.ignoreErrors.push("Javascript error: Script error. on line 0"),U.ignoreErrors=j(U.ignoreErrors),U.ignoreUrls=U.ignoreUrls.length?j(U.ignoreUrls):!1,U.whitelistUrls=U.whitelistUrls.length?j(U.whitelistUrls):!1,U.includePaths=j(U.includePaths),N=n.user,L=n.path.substr(r+1),P="//"+n.host+(n.port?":"+n.port:"")+"/"+o+"api/"+L+"/store/",n.protocol&&(P=n.protocol+":"+P),U.fetchContext&&(C.remoteFetching=!0),U.linesOfContext&&(C.linesOfContext=U.linesOfContext),C.collectWindowErrors=!!U.collectWindowErrors,f(),F},install:function(){return x()&&!H&&(C.report.subscribe(d),H=!0),F},context:function(e,n,r){return s(e)&&(r=n||[],n=e,e=t),F.wrap(e,n).apply(this,r)},wrap:function(e,n){function r(){for(var t=[],r=arguments.length,i=!e||e&&e.deep!==!1;r--;)t[r]=i?F.wrap(e,arguments[r]):arguments[r];try{return n.apply(this,t)}catch(o){throw F.captureException(o,e),o}}if(o(n)&&!s(e))return e;if(s(e)&&(n=e,e=t),!s(n))return n;if(n.__raven__)return n;for(var i in n)c(n,i)&&(r[i]=n[i]);return r.__raven__=!0,r.__inner__=n,r},uninstall:function(){return C.report.uninstall(),H=!1,F},captureException:function(e,t){if(!(e instanceof Error))return F.captureMessage(e,t);_=e;try{C.report(e,t)}catch(n){if(e!==n)throw n}return F},captureMessage:function(e,t){return b(g({message:e+""},t)),F},setUserContext:function(e){return R=e,F},setExtraContext:function(e){return U.extra=e||{},F},setTagsContext:function(e){return U.tags=e||{},F},lastException:function(){return _},lastEventId:function(){return T}};F.setUser=F.setUserContext;var $="source protocol user pass host port path".split(" "),D=/^(?:(\w+):)?\/\/(\w+)(:\w+)?@([\w\.-]+)(?::(\d+))?(\/.*)/;r.prototype=new Error,r.prototype.constructor=r,E(),e.Raven=F,"function"==typeof define&&define.amd&&define("raven",[],function(){return F})}(this),!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define("reqwest",n):t[e]=n()}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t.headers||{};r.Accept=r.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var i="undefined"!=typeof FormData&&t.data instanceof FormData;t.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||i||(r[contentType]=t.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var i=uniqid++,o=e.jsonpCallback||"callback",s=e.jsonpCallbackName||reqwest.getcallbackPrefix(i),a=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),u=r.match(a),c=doc.createElement("script"),l=0,f=-1!==navigator.userAgent.indexOf("MSIE 10.0");return u?"?"===u[3]?r=r.replace(a,"$1="+s):s=u[3]:r=urlappend(r,o+"="+s),context[s]=generalCallback,c.type="text/javascript",c.src=r,c.async=!0,"undefined"==typeof c.onreadystatechange||f||(c.htmlFor=c.id="_reqwest_"+i),c.onload=c.onreadystatechange=function(){return c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||l?!1:(c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),void(l=1))},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),l=1}}}function getRequest(e,t){var n,r=this.o,i=(r.method||"GET").toUpperCase(),o="string"==typeof r?r:r.url,s=r.processData!==!1&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,a=!1;return"jsonp"!=r.type&&"GET"!=i||!s||(o=urlappend(o,s),s=null),"jsonp"==r.type?handleJsonp(r,e,t,o):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(i,o,r.async===!1?!1:!0),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,e,t),r.before&&r.before(n),a?setTimeout(function(){n.send(s)},200):n.send(s),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return null===e?void 0:e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,i,o,s=e.name,a=e.tagName.toLowerCase(),u=function(e){e&&!e.disabled&&t(s,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),i=e.value,(!(n||r)||e.checked)&&t(s,normalize(n&&""===i?"on":i)));break;case"textarea":t(s,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())u(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(o=0;e.length&&o<e.length;o++)e.options[o].selected&&u(e.options[o])}}function eachFormElement(){var e,t,n=this,r=function(e,t){var r,i,o;for(r=0;r<t.length;r++)for(o=e[byTag](t[r]),i=0;i<o.length;i++)serial(o[i],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),r(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var i,o,s,a=/\[\]$/;if(isArray(t))for(o=0;t&&o<t.length;o++)s=t[o],n||a.test(e)?r(e,s):buildParams(e+"["+("object"==typeof s?o:"")+"]",s,n,r);else if(t&&"[object Object]"===t.toString())for(i in t)buildParams(e+"["+i+"]",t[i],n,r);else r(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=require("xhr2")}catch(ex){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,i=t||!1,o=[],s=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,o[o.length]=s(e)+"="+s(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)a(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],i,a);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest}),define("common/utils/pad",[],function(){return function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}}),function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,o=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),o="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(o?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&(r=t(o[i],n),-1!==r&&o[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,o,s=this.getListenersAsObject(e);for(i in s)if(s.hasOwnProperty(i))for(r=s[i].length;r--;)n=s[i][r],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=o,e},"function"==typeof define&&define.amd?define("EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}.call(this),define("common/utils/mediator",["EventEmitter"],function(e){return new e}),function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define("bonzo",n):t[e]=n()}("bonzo",this,function(){function e(e,t){var n=null,r=A.defaultView.getComputedStyle(e,"");return r&&(n=r[t]),e.style[t]||n}function t(e){return e&&e.nodeName&&(1==e.nodeType||11==e.nodeType)}function n(e,n,r){var i,o,s;if("string"==typeof e)return j.create(e);if(t(e)&&(e=[e]),r){for(s=[],i=0,o=e.length;o>i;i++)s[i]=y(n,e[i]);return s}return e}function r(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function i(e,t,n,r){for(var i,o=0,s=e.length;s>o;o++)i=r?e.length-o-1:o,t.call(n||e[i],e[i],i,e);return e}function o(e,n,r){for(var i=0,s=e.length;s>i;i++)t(e[i])&&(o(e[i].childNodes,n,r),n.call(r||e[i],e[i],i,e));return e}function s(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function a(e){return e?e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():e}function u(e){e[z]("data-node-uid")||e[W]("data-node-uid",++F);var t=e[z]("data-node-uid");return H[t]||(H[t]={})}function c(e){var t=e[z]("data-node-uid");t&&delete H[t]}function l(e){var t;try{return null===e||void 0===e?void 0:"true"===e?!0:"false"===e?!1:"null"===e?null:(t=parseFloat(e))==e?t:e}catch(n){}return void 0}function f(e,t,n){for(var r=0,i=e.length;i>r;++r)if(t.call(n||null,e[r],r,e))return!0;return!1}function d(e){return"transform"==e&&(e=V.transform)||/^transform-?[Oo]rigin$/.test(e)&&(e=V.transform+"Origin"),e?s(e):null}function h(e,t,r,o){var s=0,a=t||this,u=[],c=G&&"string"==typeof e&&"<"!=e.charAt(0)?G(e):e;return i(n(c),function(e,t){i(a,function(n){r(e,u[s++]=t>0?y(a,n):n)},null,o)},this,o),a.length=s,i(u,function(e){a[--s]=e},null,!o),a}function p(e,t,n){var r=j(e),i=r.css("position"),o=r.offset(),s="relative",a=i==s,u=[parseInt(r.css("left"),10),parseInt(r.css("top"),10)];"static"==i&&(r.css("position",s),i=s),isNaN(u[0])&&(u[0]=a?0:e.offsetLeft),isNaN(u[1])&&(u[1]=a?0:e.offsetTop),null!=t&&(e.style.left=t-o.left+u[0]+B),null!=n&&(e.style.top=n-o.top+u[1]+B)}function m(e,t){return"function"==typeof t?t.call(e,e):t}function g(e,t,n){var r=this[0];return r?null==e&&null==t?(b(r)?w():{x:r.scrollLeft,y:r.scrollTop})[n]:(b(r)?C.scrollTo(e,t):(null!=e&&(r.scrollLeft=e),null!=t&&(r.scrollTop=t)),this):this}function v(e){if(this.length=0,e){e="string"==typeof e||e.nodeType||"undefined"==typeof e.length?[e]:e,this.length=e.length;for(var t=0;t<e.length;t++)this[t]=e[t]}}function y(e,t){var n,r,i,o=t.cloneNode(!0);if(e.$&&"function"==typeof e.cloneEvents)for(e.$(o).cloneEvents(t),n=e.$(o).find("*"),r=e.$(t).find("*"),i=0;i<r.length;i++)e.$(n[i]).cloneEvents(r[i]);return o}function b(e){return e===C||/^(?:body|html)$/i.test(e.tagName)}function w(){return{x:C.pageXOffset||O.scrollLeft,y:C.pageYOffset||O.scrollTop}}function x(e){var t=document.createElement("script"),n=e.match(R);return t.src=n[1],t}function j(e){return new v(e)}var k,S,E,C=window,A=C.document,O=A.documentElement,_="parentNode",T=/^(checked|value|selected|disabled)$/i,P=/^(select|fieldset|table|tbody|tfoot|td|tr|colgroup)$/i,R=/\s*<script +src=['"]([^'"]+)['"]>/,N=["<table>","</table>",1],L=["<table><tbody><tr>","</tr></tbody></table>",3],q=["<select>","</select>",1],I=["_","",0,1],M={thead:N,tbody:N,tfoot:N,colgroup:N,caption:N,tr:["<table><tbody>","</tbody></table>",2],th:L,td:L,col:["<table><colgroup>","</colgroup></table>",2],fieldset:["<form>","</form>",1],legend:["<form><fieldset>","</fieldset></form>",2],option:q,optgroup:q,script:I,style:I,link:I,param:I,base:I},U=/^(checked|selected|disabled)$/,H={},F=0,$=/^-?[\d\.]+$/,D=/^data-(.+)$/,B="px",W="setAttribute",z="getAttribute",V=function(){var e=A.createElement("p");return{transform:function(){var t,n=["transform","webkitTransform","MozTransform","OTransform","msTransform"];for(t=0;t<n.length;t++)if(n[t]in e.style)return n[t]}(),classList:"classList"in e}}(),Q=/\s+/,J=String.prototype.toString,X={lineHeight:1,zoom:1,zIndex:1,opacity:1,boxFlex:1,WebkitBoxFlex:1,MozBoxFlex:1},G=A.querySelectorAll&&function(e){return A.querySelectorAll(e)};return V.classList?(k=function(e,t){return e.classList.contains(t)},S=function(e,t){e.classList.add(t)},E=function(e,t){e.classList.remove(t)}):(k=function(e,t){return r(t).test(e.className)},S=function(e,t){e.className=(e.className+" "+t).trim()},E=function(e,t){e.className=e.className.replace(r(t)," ").trim()}),v.prototype={get:function(e){return this[e]||null},each:function(e,t){return i(this,e,t)},deepEach:function(e,t){return o(this,e,t)},map:function(e,t){var n,r,i=[];for(r=0;r<this.length;r++)n=e.call(this,this[r],r),t?t(n)&&i.push(n):i.push(n);return i},html:function(e,t){var r=t?"textContent":"innerHTML",o=this,s=function(t,r){i(n(e,o,r),function(e){t.appendChild(e)})},a=function(n,i){try{if(t||"string"==typeof e&&!P.test(n.tagName))return n[r]=e}catch(o){}s(n,i)};return"undefined"!=typeof e?this.empty().each(a):this[0]?this[0][r]:""},text:function(e){return this.html(e,!0)},append:function(e){var t=this;return this.each(function(r,o){i(n(e,t,o),function(e){r.appendChild(e)})})},prepend:function(e){var t=this;return this.each(function(r,o){var s=r.firstChild;i(n(e,t,o),function(e){r.insertBefore(e,s)})})},appendTo:function(e,t){return h.call(this,e,t,function(e,t){e.appendChild(t)})},prependTo:function(e,t){return h.call(this,e,t,function(e,t){e.insertBefore(t,e.firstChild)},1)},before:function(e){var t=this;return this.each(function(r,o){i(n(e,t,o),function(e){r[_].insertBefore(e,r)})})},after:function(e){var t=this;return this.each(function(r,o){i(n(e,t,o),function(e){r[_].insertBefore(e,r.nextSibling)},null,1)})},insertBefore:function(e,t){return h.call(this,e,t,function(e,t){e[_].insertBefore(t,e)})},insertAfter:function(e,t){return h.call(this,e,t,function(e,t){var n=e.nextSibling;n?e[_].insertBefore(t,n):e[_].appendChild(t)},1)},replaceWith:function(e){var t=this;return this.each(function(r,o){i(n(e,t,o),function(e){r[_]&&r[_].replaceChild(e,r)})})},clone:function(e){var t,n,r=[];for(n=0,t=this.length;t>n;n++)r[n]=y(e||this,this[n]);return j(r)},addClass:function(e){return e=J.call(e).split(Q),this.each(function(t){i(e,function(e){e&&!k(t,m(t,e))&&S(t,m(t,e))})})},removeClass:function(e){return e=J.call(e).split(Q),this.each(function(t){i(e,function(e){e&&k(t,m(t,e))&&E(t,m(t,e))})})},hasClass:function(e){return e=J.call(e).split(Q),f(this,function(t){return f(e,function(e){return e&&k(t,e)})})},toggleClass:function(e,t){return e=J.call(e).split(Q),this.each(function(n){i(e,function(e){e&&("undefined"!=typeof t?t?!k(n,e)&&S(n,e):E(n,e):k(n,e)?E(n,e):S(n,e))})})},show:function(e){return e="string"==typeof e?e:"",this.each(function(t){t.style.display=e})},hide:function(){return this.each(function(e){e.style.display="none"})},toggle:function(e,t){return t="string"==typeof t?t:"","function"!=typeof e&&(e=null),this.each(function(n){n.style.display=n.offsetWidth||n.offsetHeight?"none":t,e&&e.call(n)})},first:function(){return j(this.length?this[0]:[])},last:function(){return j(this.length?this[this.length-1]:[])},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},parent:function(){return this.related(_)},related:function(e){return j(this.map(function(t){for(t=t[e];t&&1!==t.nodeType;)t=t[e];return t||0},function(e){return e}))},focus:function(){return this.length&&this[0].focus(),this},blur:function(){return this.length&&this[0].blur(),this},css:function(t,n){function r(e,t,n){for(var r in o)if(o.hasOwnProperty(r)){n=o[r],(t=d(r))&&$.test(n)&&!(t in X)&&(n+=B);try{e.style[t]=m(e,n)}catch(i){}}}var i,o=t;return void 0===n&&"string"==typeof t?(n=this[0],n?n===A||n===C?(i=n===A?j.doc():j.viewport(),"width"==t?i.width:"height"==t?i.height:""):(t=d(t))?e(n,t):null:null):("string"==typeof t&&(o={},o[t]=n),this.each(r))},offset:function(e,t){if(e&&"object"==typeof e&&("number"==typeof e.top||"number"==typeof e.left))return this.each(function(t){p(t,e.left,e.top)});if("number"==typeof e||"number"==typeof t)return this.each(function(n){p(n,e,t)});if(!this[0])return{top:0,left:0,height:0,width:0};var n=this[0],r=n.ownerDocument.documentElement,i=n.getBoundingClientRect(),o=w(),s=n.offsetWidth,a=n.offsetHeight,u=i.top+o.y-Math.max(0,r&&r.clientTop,A.body.clientTop),c=i.left+o.x-Math.max(0,r&&r.clientLeft,A.body.clientLeft);return{top:u,left:c,height:a,width:s}},dim:function(){if(!this.length)return{height:0,width:0};var e=this[0],t=9==e.nodeType&&e.documentElement,n=t||!e.style||e.offsetWidth||e.offsetHeight?null:function(t){var n={position:e.style.position||"",visibility:e.style.visibility||"",display:e.style.display||""};return t.first().css({position:"absolute",visibility:"hidden",display:"block"}),n}(this),r=t?Math.max(e.body.scrollWidth,e.body.offsetWidth,t.scrollWidth,t.offsetWidth,t.clientWidth):e.offsetWidth,i=t?Math.max(e.body.scrollHeight,e.body.offsetHeight,t.scrollHeight,t.offsetHeight,t.clientHeight):e.offsetHeight;return n&&this.first().css(n),{height:i,width:r}},attr:function(e,t){var n,r=this[0];if("string"!=typeof e&&!(e instanceof String)){for(n in e)e.hasOwnProperty(n)&&this.attr(n,e[n]);return this}return"undefined"==typeof t?r?T.test(e)?U.test(e)&&"string"==typeof r[e]?!0:r[e]:r[z](e):null:this.each(function(n){T.test(e)?n[e]=m(n,t):n[W](e,m(n,t))})},removeAttr:function(e){return this.each(function(t){U.test(e)?t[e]=!1:t.removeAttribute(e)})},val:function(e){return"string"==typeof e||"number"==typeof e?this.attr("value",e):this.length?this[0].value:null},data:function(e,t){var n,r,o=this[0];return"undefined"==typeof t?o?(n=u(o),"undefined"==typeof e?(i(o.attributes,function(e){(r=(""+e.name).match(D))&&(n[s(r[1])]=l(e.value))}),n):("undefined"==typeof n[e]&&(n[e]=l(this.attr("data-"+a(e)))),n[e])):null:this.each(function(n){u(n)[e]=t})},remove:function(){return this.deepEach(c),this.detach()},empty:function(){return this.each(function(e){for(o(e.childNodes,c);e.firstChild;)e.removeChild(e.firstChild)})},detach:function(){return this.each(function(e){e[_]&&e[_].removeChild(e)})},scrollTop:function(e){return g.call(this,null,e,"y")},scrollLeft:function(e){return g.call(this,e,null,"x")}},j.setQueryEngine=function(e){G=e,delete j.setQueryEngine},j.aug=function(e,t){for(var n in e)e.hasOwnProperty(n)&&((t||v.prototype)[n]=e[n]);
},j.create=function(e){return"string"==typeof e&&""!==e?function(){if(R.test(e))return[x(e)];var t=e.match(/^\s*<([^\s>]+)/),n=A.createElement("div"),r=[],o=t?M[t[1].toLowerCase()]:null,s=o?o[2]+1:1,a=o&&o[3],u=_;for(n.innerHTML=o?o[0]+e+o[1]:e;s--;)n=n.firstChild;a&&n&&1!==n.nodeType&&(n=n.nextSibling);do t&&1!=n.nodeType||r.push(n);while(n=n.nextSibling);return i(r,function(e){e[u]&&e[u].removeChild(e)}),r}():t(e)?[e.cloneNode(!0)]:[]},j.doc=function(){var e=j.viewport();return{width:Math.max(A.body.scrollWidth,O.scrollWidth,e.width),height:Math.max(A.body.scrollHeight,O.scrollHeight,e.height)}},j.firstChild=function(e){for(var t,n=e.childNodes,r=0,i=n&&n.length||0;i>r;r++)1===n[r].nodeType&&(t=n[i=r]);return t},j.viewport=function(){return{width:C.innerWidth,height:C.innerHeight}},j.isAncestor="compareDocumentPosition"in O?function(e,t){return 16==(16&e.compareDocumentPosition(t))}:function(e,t){return e!==t&&e.contains(t)},j}),function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define("qwery",n):t[e]=n()}("qwery",this,function(){function e(){this.c={}}function t(e){return J.g(e)||J.s(e,"(^|\\s+)"+e+"(\\s+|$)",1)}function n(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n])}function r(e){for(var t=[],n=0,r=e.length;r>n;++n)m(e[n])?t=t.concat(e[n]):t[t.length]=e[n];return t}function i(e){for(var t=0,n=e.length,r=[];n>t;t++)r[t]=e[t];return r}function o(e){for(;(e=e.previousSibling)&&1!=e[O];);return e}function s(e){return e.match(V)}function a(e,n,r,i,o,s,a,u,l,f,d){var h,p,m,g,v;if(1!==this[O])return!1;if(n&&"*"!==n&&this[A]&&this[A].toLowerCase()!==n)return!1;if(r&&(p=r.match(_))&&p[1]!==this.id)return!1;if(r&&(v=r.match(T)))for(h=v.length;h--;)if(!t(v[h].slice(1)).test(this.className))return!1;if(l&&y.pseudos[l]&&!y.pseudos[l](this,d))return!1;if(i&&!a){g=this.attributes;for(m in g)if(Object.prototype.hasOwnProperty.call(g,m)&&(g[m].name||m)==o)return this}return i&&!c(s,Y(this,o)||"",a)?!1:this}function u(e){return X.g(e)||X.s(e,e.replace(H,"\\$1"))}function c(e,t,n){switch(e){case"=":return t==n;case"^=":return t.match(G.g("^="+n)||G.s("^="+n,"^"+u(n),1));case"$=":return t.match(G.g("$="+n)||G.s("$="+n,u(n)+"$",1));case"*=":return t.match(G.g(n)||G.s(n,u(n),1));case"~=":return t.match(G.g("~="+n)||G.s("~="+n,"(?:^|\\s+)"+u(n)+"(?:\\s+|$)",1));case"|=":return t.match(G.g("|="+n)||G.s("|="+n,"^"+u(n)+"(-|$)",1))}return 0}function l(e,t){var r,i,o,u,c,l,f,h=[],p=[],m=t,g=K.g(e)||K.s(e,e.split(z)),y=e.match(W);if(!g.length)return h;if(u=(g=g.slice(0)).pop(),g.length&&(o=g[g.length-1].match(P))&&(m=v(t,o[1])),!m)return h;for(l=s(u),c=m!==t&&9!==m[O]&&y&&/^[+~]$/.test(y[y.length-1])?function(e){for(;m=m.nextSibling;)1==m[O]&&(l[1]?l[1]==m[A].toLowerCase():1)&&(e[e.length]=m);return e}([]):m[S](l[1]||"*"),r=0,i=c.length;i>r;r++)(f=a.apply(c[r],l))&&(h[h.length]=f);return g.length?(n(h,function(e){d(e,g,y)&&(p[p.length]=e)}),p):h}function f(e,t,n){if(h(t))return e==t;if(m(t))return!!~r(t).indexOf(e);for(var i,o,u=t.split(",");t=u.pop();)if(i=K.g(t)||K.s(t,t.split(z)),o=t.match(W),i=i.slice(0),a.apply(e,s(i.pop()))&&(!i.length||d(e,i,o,n)))return!0;return!1}function d(e,t,n,r){function i(e,r,u){for(;u=Q[n[r]](u,e);)if(h(u)&&a.apply(u,s(t[r]))){if(!r)return u;if(o=i(u,r-1,u))return o}}var o;return(o=i(e,t.length-1,e))&&(!r||Z(o,r))}function h(e,t){return e&&"object"==typeof e&&(t=e[O])&&(1==t||9==t)}function p(e){var t,n,r=[];e:for(t=0;t<e.length;++t){for(n=0;n<r.length;++n)if(r[n]==e[t])continue e;r[r.length]=e[t]}return r}function m(e){return"object"==typeof e&&isFinite(e.length)}function g(e){return e?"string"==typeof e?y(e)[0]:!e[O]&&m(e)?e[0]:e:x}function v(e,t,n){return 9===e[O]?e.getElementById(t):e.ownerDocument&&((n=e.ownerDocument.getElementById(t))&&Z(n,e)&&n||!Z(e,e.ownerDocument)&&w('[id="'+t+'"]',e)[0])}function y(e,t){var n,o,s=g(t);if(!s||!e)return[];if(e===window||h(e))return!t||e!==window&&h(s)&&Z(e,s)?[e]:[];if(e&&m(e))return r(e);if(n=e.match(B)){if(n[1])return(o=v(s,n[1]))?[o]:[];if(n[2])return i(s[S](n[2]));if(ee&&n[3])return i(s[k](n[3]))}return w(e,s)}function b(e,t){return function(n){var r,i;return q.test(n)?void(9!==e[O]&&((i=r=e.getAttribute("id"))||e.setAttribute("id",i="__qwerymeupscotty"),n='[id="'+i+'"]'+n,t(e.parentNode||e,n,!0),r||e.removeAttribute("id"))):void(n.length&&t(e,n,!1))}}var w,x=document,j=x.documentElement,k="getElementsByClassName",S="getElementsByTagName",E="querySelectorAll",C="useNativeQSA",A="tagName",O="nodeType",_=/#([\w\-]+)/,T=/\.[\w\-]+/g,P=/^#([\w\-]+)$/,R=/^\.([\w\-]+)$/,N=/^([\w\-]+)$/,L=/^([\w]+)?\.([\w\-]+)$/,q=/(^|,)\s*[>~+]/,I=/^\s+|\s*([,\s\+\~>]|$)\s*/g,M=/[\s\>\+\~]/,U=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,H=/([.*+?\^=!:${}()|\[\]\/\\])/g,F=/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,$=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,D=/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/,B=new RegExp(P.source+"|"+N.source+"|"+R.source),W=new RegExp("("+M.source+")"+U.source,"g"),z=new RegExp(M.source+U.source),V=new RegExp(F.source+"("+$.source+")?("+D.source+")?"),Q={" ":function(e){return e&&e!==j&&e.parentNode},">":function(e,t){return e&&e.parentNode==t.parentNode&&e.parentNode},"~":function(e){return e&&e.previousSibling},"+":function(e,t,n,r){return e?(n=o(e))&&(r=o(t))&&n==r&&n:!1}};e.prototype={g:function(e){return this.c[e]||void 0},s:function(e,t,n){return t=n?new RegExp(t):t,this.c[e]=t}};var J=new e,X=new e,G=new e,K=new e,Z="compareDocumentPosition"in j?function(e,t){return 16==(16&t.compareDocumentPosition(e))}:"contains"in j?function(e,t){return t=9===t[O]||t==window?j:t,t!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},Y=function(){var e=x.createElement("p");return(e.innerHTML='<a href="#x">x</a>')&&"#x"!=e.firstChild.getAttribute("href")?function(e,t){return"class"===t?e.className:"href"===t||"src"===t?e.getAttribute(t,2):e.getAttribute(t)}:function(e,t){return e.getAttribute(t)}}(),ee=!!x[k],te=x.querySelector&&x[E],ne=function(e,t){var r,o,s=[];try{return 9!==t[O]&&q.test(e)?(n(r=e.split(","),b(t,function(e,t){o=e[E](t),1==o.length?s[s.length]=o.item(0):o.length&&(s=s.concat(i(o)))})),r.length>1&&s.length>1?p(s):s):i(t[E](e))}catch(a){}return re(e,t)},re=function(e,r){var i,o,s,a,u,c,f=[];if(e=e.replace(I,"$1"),o=e.match(L)){for(u=t(o[2]),i=r[S](o[1]||"*"),s=0,a=i.length;a>s;s++)u.test(i[s].className)&&(f[f.length]=i[s]);return f}return n(c=e.split(","),b(r,function(e,t,n){for(u=l(t,e),s=0,a=u.length;a>s;s++)(9===e[O]||n||Z(u[s],r))&&(f[f.length]=u[s])})),c.length>1&&f.length>1?p(f):f},ie=function(e){"undefined"!=typeof e[C]&&(w=e[C]&&te?ne:re)};return ie({useNativeQSA:!0}),y.configure=ie,y.uniq=p,y.is=f,y.pseudos={},y}),define("common/utils/$",["bonzo","qwery","lodash/collections/forEach"],function(e,t,n){function r(n,r){return e(t(n,r))}return e.aug({height:function(){return this.dim().height}}),r.create=function(t){return e(e.create(t))},r.ancestor=function(t,n){return"html"===t.nodeName.toLowerCase()?!1:!t.parentNode||e(t.parentNode).hasClass(n)?t.parentNode:r.ancestor(t.parentNode,n)},r.forEachElement=function(e,r){var i=t(e);return n(i,r),i},r}),define("lodash/arrays/last",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,o,s){var a=0,u=n?n.length:0;if("number"!=typeof o&&null!=o){var c=u;for(o=e(o,s,3);c--&&o(n[c],c,n);)a++}else if(a=o,null==a||s)return n?n[u-1]:r;return t(n,i(0,u-a))}var r,i=Math.max;return n}),define("lodash/arrays/findIndex",["../functions/createCallback"],function(e){function t(t,n,r){var i=-1,o=t?t.length:0;for(n=e(n,r,3);++i<o;)if(n(t[i],i,t))return i;return-1}return t}),define("lodash/internals/defaultsIteratorOptions",["../objects/keys"],function(e){var t={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:e,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"};return t}),define("lodash/objects/defaults",["../internals/createIterator","../internals/defaultsIteratorOptions"],function(e,t){var n=e(t);return n}),define("lodash/objects/has",[],function(){function e(e,t){return e?n.call(e,t):!1}var t=Object.prototype,n=t.hasOwnProperty;return e}),define("lodash/arrays/first",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,s,a){var u=0,c=n?n.length:0;if("number"!=typeof s&&null!=s){var l=-1;for(s=e(s,a,3);++l<c&&s(n[l],l,n);)u++}else if(u=s,null==u||a)return n?n[0]:r;return t(n,0,o(i(0,u),c))}var r,i=Math.max,o=Math.min;return n}),define("lodash/collections/forEachRight",["../internals/baseCreateCallback","../internals/baseEach","../objects/isArray","../objects/isString","../objects/keys","../support"],function(e,t,n,r,i,o){function s(s,a,u){var c=s,l=s?s.length:0;if(a=a&&"undefined"==typeof u?a:e(a,u,3),n(s))for(;l--&&a(s[l],l,s)!==!1;);else{if("number"!=typeof l){var f=i(s);l=f.length}else o.unindexedChars&&r(s)&&(c=s.split(""));t(s,function(e,t,n){return t=f?f[--l]:--l,a(c[t],t,n)})}return s}return s}),define("lodash/collections/findLast",["../functions/createCallback","./forEachRight"],function(e,t){function n(n,r,i){var o;return r=e(r,i,3),t(n,function(e,t,n){return r(e,t,n)?(o=e,!1):void 0}),o}return n}),define("lodash/functions/partialRight",["../internals/createWrapper","../internals/slice"],function(e,t){function n(n){return e(n,32,null,t(arguments,1))}return n}),define("common/utils/chain",["lodash/functions/partialRight"],function(e){var t={setValue:function(e){this.__value=e},and:function(){var t=e.apply(null,arguments),n=t(this.value());return o(n)},value:function(){return this.__value},valueOf:function(){return this.value()}},n=["concat","join","reverse","sort"],r=["slice","shift","pop","push","splice","unshift"];n.forEach(function(e){t[e]=function(){var t=Array.prototype.slice.call(arguments),n=Array.prototype[e].apply(this.value(),t);return o(n)}}),r.forEach(function(e){t[e]=function(){var t=Array.prototype.slice.call(arguments);return Array.prototype[e].apply(this.value(),t),o(this.value())}});var i=function(e){if(Object.create)return Object.create(e);var t=function(){};return t.prototype=e,new t},o=function(e){var n=i(t);return n.setValue(e),n};return o}),define("lodash/internals/baseIndexOf",[],function(){function e(e,t,n){for(var r=(n||0)-1,i=e?e.length:0;++r<i;)if(e[r]===t)return r;return-1}return e}),define("lodash/collections/contains",["../internals/baseEach","../internals/baseIndexOf","../objects/isArray","../objects/isString"],function(e,t,n,r){function i(i,s,a){var u=-1,c=t,l=i?i.length:0,f=!1;return a=(0>a?o(0,l+a):a)||0,n(i)?f=c(i,s,a)>-1:"number"==typeof l?f=(r(i)?i.indexOf(s,a):c(i,s,a))>-1:e(i,function(e){return++u>=a?!(f=e===s):void 0}),f}var o=Math.max;return i}),define("lodash/collections/pluck",["./map"],function(e){var t=e;return t}),define("lodash/arrays/initial",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,o,s){var a=0,u=n?n.length:0;if("number"!=typeof o&&null!=o){var c=u;for(o=e(o,s,3);c--&&o(n[c],c,n);)a++}else a=null==o||s?1:o||a;return t(n,0,i(r(0,u-a),u))}var r=Math.max,i=Math.min;return n}),define("lodash/arrays/rest",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,i,o){if("number"!=typeof i&&null!=i){var s=0,a=-1,u=n?n.length:0;for(i=e(i,o,3);++a<u&&i(n[a],a,n);)s++}else s=null==i||o?1:r(0,i);return t(n,s)}var r=Math.max;return n}),define("common/utils/detect",["common/utils/mediator","common/utils/$","lodash/arrays/last","lodash/arrays/findIndex","lodash/objects/defaults","lodash/objects/has","lodash/arrays/first","lodash/collections/findLast","common/utils/chain","lodash/collections/contains","lodash/collections/pluck","lodash/arrays/initial","lodash/arrays/rest","Promise"],function(e,t,n,r,i,o,s,a,u,c,l,f,d,h){function p(e){var t=N(e);return function(n){var r=N(e);r!==t&&(n(r,t),t=r)}}function m(e){var t,n,r,i=e||window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance;return i&&i.timing&&(t=i.timing.requestStart||i.timing.fetchStart||i.timing.navigationStart,n=i.timing.responseEnd,t&&n&&(r=n-t)),r}function g(){var e=window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance;return e&&e.navigation?e.navigation.type===e.navigation.TYPE_RELOAD:!1}function v(){return/(iPad|iPhone|iPod touch)/i.test(navigator.userAgent)}function y(){return/Android/i.test(navigator.userAgent)}function b(){return navigator.mozApps&&!window.locationbar.visible}function w(){return navigator.userAgent.indexOf("FBAN/")>-1}function x(){return navigator.userAgent.indexOf("Twitter for iPhone")>-1}function j(){return/\.t\.co/.test(document.referrer)}function k(){return/\.facebook\.com/.test(document.referrer)}function S(){return/\.theguardian\.com/.test(document.referrer)}function E(){var e=/socialContext=(facebook|twitter)/.exec(window.location.hash);return null!==e?e[1]:w()||k()?"facebook":x()||j()?"twitter":null}function C(e,t,n){t=t||navigator.connection||navigator.mozConnection||navigator.webkitConnection||{type:"unknown"};var r,i,o=3===t.type||4===t.type||/^[23]g$/.test(t.type);return o?"low":(r=m(e),i="high",n&&(i="unknown"),r&&r>1e3&&(i="medium",r>3e3&&(i="low")),i)}function A(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function O(){return void 0!==B?B:(window.history&&history.pushState&&(B=!0,window.navigator.userAgent.match(/Android/i)&&(B=!!window.navigator.userAgent.match(/(Chrome|Firefox)/i))),B)}function _(){var e=document.createElement("video"),t={};try{e.canPlayType&&(t.mp4=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t}function T(){return window.innerHeight>window.innerWidth?"portrait":"landscape"}function P(){var e=window,t=document,n=t.documentElement,r=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||r.clientWidth,height:e.innerHeight||n.clientHeight||r.clientHeight}}function R(e,t){var n,r=[],i=e.length;for(n=0;i>n&&t(e[n]);n++)r.push(e[n]);return r}function N(e){var t,i=z.getViewport().width,o=n(R(Q,function(e){return e.width<=i})).name;return e||(t=r(Q,function(e){return e.name===o}),o=u(Q).and(s,t+1).and(a,function(e){return!e.isTweakpoint}).valueOf().name),o}function L(e){var t=i(e,{min:s(Q).name,max:n(Q).name}),r=N(!0);return u(Q).and(d,function(e){return e.name!==t.min}).and(f,function(e){return e.name!==t.max}).and(l,"name").and(c,r).value()}function q(){function t(t){var r="visible",i="hidden",o={focus:r,focusin:r,pageshow:r,blur:i,focusout:i,pagehide:i};t=t||window.event,V=t.type in o?o[t.type]:this[n]?"hidden":"visible",e.emit("modules:detect:pagevisibility:"+V)}var n="hidden";n in document?document.addEventListener("visibilitychange",t):(n="mozHidden")in document?document.addEventListener("mozvisibilitychange",t):(n="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",t):(n="msHidden")in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?document.onfocusin=document.onfocusout=t:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t}function I(){return"visible"===V}function M(){return"WebSocket"in window}function U(){return window.guardian.isModernBrowser}function H(){function e(e){return"none"===e.css("display")}if(!z.cachedAdblockInUse){var t=$(),n=e(t);return t.remove(),z.cachedAdblockInUse=n,n}return z.cachedAdblockInUse}function F(){var e=$(),t=e.css("-moz-binding");return t?null!==t.match("elemhidehit"):!1}function $(){var e=t.create('<div class="ad_unit" style="position: absolute; left: -9999px; height: 10px">&nbsp;</div>');return e.appendTo(document.body),e}function D(){return document.referrer||""}var B,W,z,V=document.visibilityState||document.webkitVisibilityState||document.mozVisibilityState||document.msVisibilityState||"visible",Q=[{name:"mobile",isTweakpoint:!1,width:0},{name:"mobileLandscape",isTweakpoint:!0,width:480},{name:"phablet",isTweakpoint:!0,width:660},{name:"tablet",isTweakpoint:!1,width:740},{name:"desktop",isTweakpoint:!1,width:980},{name:"leftCol",isTweakpoint:!0,width:1140},{name:"wide",isTweakpoint:!1,width:1300}];W=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===n[1]&&(e=t.match(/\bOPR\/(\d+)/),null!==e)?"Opera "+e[1]:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{browser:n[0],version:n[1]})}();var J=new h(function(e){o(window.guardian.adBlockers,"generic")?e(window.guardian.adBlockers):window.guardian.adBlockers.onDetect=e}),X=J.then(function(e){return e.generic}),G=J.then(function(e){return e.ffAdblockPlus});return z={hasCrossedBreakpoint:p,getConnectionSpeed:C,getVideoFormatSupport:_,hasTouchScreen:A,hasPushStateSupport:O,getOrientation:T,getBreakpoint:N,getViewport:P,getUserAgent:W,isIOS:v,isAndroid:y,isFireFoxOSApp:b,isFacebookApp:w,isTwitterApp:x,isFacebookReferral:k,isTwitterReferral:j,isGuardianReferral:S,socialContext:E,isBreakpoint:L,isReload:g,initPageVisibility:q,pageVisible:I,hasWebSocket:M,getPageSpeed:m,breakpoints:Q,isModernBrowser:U,adblockInUseSync:H,getFirefoxAdblockPlusInstalledSync:F,adblockInUse:X,getFirefoxAdblockPlusInstalled:G,getReferrer:D}}),define("lodash/arrays/zipObject",["../objects/isArray"],function(e){function t(t,n){var r=-1,i=t?t.length:0,o={};for(n||!i||e(t[0])||(n=[]);++r<i;){var s=t[r];n?o[s]=n[r]:s&&(o[s[0]]=s[1])}return o}return t}),define("lodash/arrays/compact",[],function(){function e(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}return e}),define("lodash/objects/pairs",["./keys"],function(e){function t(t){for(var n=-1,r=e(t),i=r.length,o=Array(i);++n<i;){var s=r[n];o[n]=[s,t[s]]}return o}return t}),define("common/utils/url",["common/utils/detect","common/utils/mediator","lodash/objects/isArray","lodash/arrays/zipObject","lodash/collections/map","lodash/arrays/compact","common/utils/chain","lodash/objects/pairs"],function(e,t,n,r,i,o,s,a){var u=e.hasPushStateSupport(),c={getUrlVars:function(e){var t=e||{};return s((t.query||c.getCurrentQueryString()).split("&")).and(o).and(i,function(e){return e.indexOf("=")>-1?e.split("="):[e,!0]}).and(r).valueOf()},getCurrentQueryString:function(){return window.location.search.replace(/^\?/,"")},pushQueryString:function(e){e.querystring&&u&&c.getCurrentQueryString()!==e.querystring&&history.pushState(e.state||{},e.title||window.title,e.querystring+window.location.hash)},constructQuery:function(e){return s(e).and(a).and(i,function(e){var t=e[1];return n(t)&&(t=t.join(",")),[e[0],"=",t].join("")}).join("&").value()},getPath:function(e){var t=document.createElement("a");return t.href=e,t.pathname},pushUrl:function(e,t,n,r){u&&window.history[r?"replaceState":"pushState"](e,t,n)},back:function(){u&&window.history.back()}};return t.on("modules:url:pushquerystring",c.pushQueryString),{getUrlVars:c.getUrlVars,getPath:c.getPath,pushUrl:c.pushUrl,constructQuery:c.constructQuery,back:c.back,hasHistorySupport:u}}),define("lodash/objects/assign",["../internals/createIterator","../internals/defaultsIteratorOptions"],function(e,t){var n=e(t,{top:t.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"});return n}),define("lodash/collections/filter",["../internals/baseEach","../functions/createCallback","../objects/isArray"],function(e,t,n){function r(r,i,o){var s=[];if(i=t(i,o,3),n(r))for(var a=-1,u=r.length;++a<u;){var c=r[a];i(c,a,r)&&s.push(c)}else e(r,function(e,t,n){i(e,t,n)&&s.push(e)});return s}return r}),define("common/utils/config",["common/utils/pad","common/utils/url","lodash/objects/assign","lodash/collections/contains","lodash/collections/map","lodash/collections/filter","common/utils/chain"],function(e,t,n,r,i,o,s){var a=guardian.config,u=t.getUrlVars()["ad-unit"];return u&&(a.page.adUnit=["/",a.page.dfpAccountId,"/",u].join("")),a.ophan={pageViewId:(new Date).getTime().toString(36)+"xxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(36*Math.random()).toString(36)})},n({hasTone:function(e){return(this.page.tones||"").indexOf(e)>-1},hasSeries:function(e){return(this.page.series||"").indexOf(e)>-1},referencesOfType:function(e){return s(this.page.references||[]).and(o,function(t){return"undefined"!=typeof t[e]}).and(i,function(t){return t[e]}).valueOf()},referenceOfType:function(e){return this.referencesOfType(e)[0]},webPublicationDateAsUrlPart:function(){if(this.page.webPublicationDate){var t=new Date(this.page.webPublicationDate);return t.getFullYear()+"/"+e(t.getMonth()+1,2)+"/"+e(t.getDate(),2)}},dateFromSlug:function(){var e=this.page.pageId.match(/\d{4}\/\w{3}\/\d{2}/);return e?e[0]:null},isMedia:r(["Video","Audio"],a.page.contentType)},a)}),define("lodash/collections/reduce",["../internals/baseEach","../functions/createCallback","../objects/isArray"],function(e,t,n){function r(r,i,o,s){var a=arguments.length<3;if(i=t(i,s,4),n(r)){var u=-1,c=r.length;for(a&&(o=r[++u]);++u<c;)o=i(o,r[u],u,r)}else e(r,function(e,t,n){o=a?(a=!1,e):i(o,e,t,n)});return o}return r}),define("common/utils/get-property",["lodash/collections/reduce","lodash/objects/has"],function(e,t){return function(n,r,i){var o=e(r.split("."),function(e,n){return t(e,n)?e[n]:void 0},n);return void 0!==o?o:void 0!==i?i:!1}}),define("common/utils/ajax",["raven","reqwest","common/utils/config","common/utils/get-property"],function(e,t,n,r){function i(r){var i;return r.url.match("^(https?:)?//")||(r.url=o+r.url,r.crossOrigin=!0),n&&"money"===n.page.section&&n.switches.imgix&&(r.data?r.data.inImgixTest=!0:r.data={inImgixTest:!0}),i=t(r),e.wrap({deep:!0},i.then),i}var o=r(n,"page.ajaxUrl","");return i.setHost=function(e){o=e},i}),define("common/utils/ajax-promise",["common/utils/ajax","raven","Promise"],function(e,t,n){return function(t){return new n(function(n,r){e(t).then(n).fail(function(e,n,i){if(i)return r(i);if(e&&e.status){var o="AJAX error ("+t.url+"): "+e.statusText||" ("+e.status+")";return r(new Error(o))}r(new Error("Unknown AJAX error ("+t.url+")"))})})}}),define("common/utils/pre-fetch-modules",["lodash/collections/map","common/utils/ajax-promise"],function(e,t){var n=window.curlConfig,r=function(e){return n.paths[e]},i=window.guardian,o=i.config.page.isDev,s=function(n){if(o)return Promise.resolve([]);var i=e(n,r),s=function(e){return e.replace(/^https?:/,"")},a=e(i,s);return Promise.all(e(a,function(e){return t({url:e,type:"html",crossOrigin:!0})}))["catch"](function(e){var t=window.console;return t&&t.error&&t.error("Caught error while prefetching.",e.stack),[]})};return s}),define("boot",["Promise","lodash/collections/forEach","domReady","common/utils/pre-fetch-modules"],function(Promise,forEach,domReady,preFetchModules){var promiseRequire=function(e){return Promise.resolve(require(e))},guardian=window.guardian,config=guardian.config,domReadyPromise=new Promise(function(e){domReady(e)}),bootStandard=function(){return domReadyPromise.then(function(){return promiseRequire(["bootstraps/standard/main"]).then(function(e){e()})})},bootEnhanced=function(){return promiseRequire(["bootstraps/enhanced/main"]).then(function(e){e()})},bootCommercial=function(){return promiseRequire(["raven"]).then(function(e){return config.switches.commercial&&!config.page.isPreferencesPage?promiseRequire(["bootstraps/commercial"]).then(e.wrap({tags:{feature:"commercial"}},function(e){e.init()})):void 0})},shouldRunEnhance=guardian.isModernBrowser,commercialResponsesPromise=preFetchModules(["bootstraps/commercial"]),enhancedModuleIds=["enhanced-vendor","bootstraps/enhanced/main"],enhancedResponsesPromise=shouldRunEnhance?preFetchModules(enhancedModuleIds):Promise.resolve(),evalAll=function(strings){forEach(strings,function(string){eval(string)})};bootStandard().then(function(){return commercialResponsesPromise.then(evalAll).then(function(){bootCommercial()})}).then(function(){return shouldRunEnhance?enhancedResponsesPromise.then(evalAll).then(function(){bootEnhanced()}):void 0})}),function(e){"use strict";function t(){this.frames=[],this.lastId=0,this.raf=n,this.batch={hash:{},read:[],write:[],mode:null}}var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)};t.prototype.read=function(e,t){var n=this.add("read",e,t),r=n.id;this.batch.read.push(n.id);var i="reading"===this.batch.mode||this.batch.scheduled;return i?r:(this.scheduleBatch(),r)},t.prototype.write=function(e,t){var n=this.add("write",e,t),r=this.batch.mode,i=n.id;this.batch.write.push(n.id);var o="writing"===r||"reading"===r||this.batch.scheduled;return o?i:(this.scheduleBatch(),i)},t.prototype.defer=function(e,t,n){"function"==typeof e&&(n=t,t=e,e=1);var r=this,i=e-1;return this.schedule(i,function(){r.run({fn:t,ctx:n})})},t.prototype.clear=function(e){if("function"==typeof e)return this.clearFrame(e);var t=this.batch.hash[e];if(t){var n=this.batch[t.type],r=n.indexOf(e);delete this.batch.hash[e],~r&&n.splice(r,1)}},t.prototype.clearFrame=function(e){var t=this.frames.indexOf(e);~t&&this.frames.splice(t,1)},t.prototype.scheduleBatch=function(){var e=this;this.schedule(0,function(){e.batch.scheduled=!1,e.runBatch()}),this.batch.scheduled=!0},t.prototype.uniqueId=function(){return++this.lastId},t.prototype.flush=function(e){for(var t;t=e.shift();)this.run(this.batch.hash[t])},t.prototype.runBatch=function(){try{this.batch.mode="reading",this.flush(this.batch.read),this.batch.mode="writing",this.flush(this.batch.write),this.batch.mode=null}catch(e){throw this.runBatch(),e}},t.prototype.add=function(e,t,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:t,ctx:n,type:e}},t.prototype.run=function(e){var t=e.ctx||this,n=e.fn;if(delete this.batch.hash[e.id],!this.onError)return n.call(t);try{n.call(t)}catch(r){this.onError(r)}},t.prototype.loop=function(){var e=this,t=this.raf;this.looping||(t(function n(){var r=e.frames.shift();e.frames.length?t(n):e.looping=!1,r&&r()}),this.looping=!0)},t.prototype.schedule=function(e,t){return this.frames[e]?this.schedule(e+1,t):(this.loop(),this.frames[e]=t)},e=e||new t,"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("fastdom",[],function(){return e}):window.fastdom=e}(window.fastdom),define("lodash/objects/isUndefined",[],function(){function e(e){return"undefined"==typeof e}return e}),define("common/utils/storage",["lodash/objects/isUndefined"],function(e){var t,n=window,r=function(e){this.type=e};return r.prototype.setWindow=function(e){n=e},r.prototype.isStorageAvailable=function(n){return(e(t)||n)&&(t=this.isAvailable()),t},r.prototype.isAvailable=function(e){var t="local-storage-module-test",r=e||"test";try{return n[this.type].setItem(t,r),n[this.type].removeItem(t),!0}catch(i){return!1}},r.prototype.set=function(e,t,r){if(this.isStorageAvailable()){if(!n[this.type])return;var i=r||{},o=JSON.stringify({value:t,expires:i.expires});return this.isAvailable(o)?n[this.type].setItem(e,o):!1}},r.prototype.get=function(e){if(this.isStorageAvailable()){var t,r;if(!n[this.type])return;if(t=n[this.type].getItem(e),null===t)return null;try{r=JSON.parse(t)}catch(i){return this.remove(e),null}return r.expires&&new Date>new Date(r.expires)?(this.remove(e),null):r.value}},r.prototype.getRaw=function(e){return this.isStorageAvailable()?n[this.type].getItem(e):void 0},r.prototype.remove=function(e){return this.isStorageAvailable()?n[this.type].removeItem(e):void 0},r.prototype.removeAll=function(){return this.isStorageAvailable()?n[this.type].clear():void 0},r.prototype.length=function(){return this.isStorageAvailable()?n[this.type].length:void 0},r.prototype.getKey=function(e){return this.isStorageAvailable()?n[this.type].key(e):void 0},r.prototype.clearByPrefix=function(e){if(this.isStorageAvailable()){var t,n;for(t=this.length()-1;t>-1;--t)n=this.getKey(t),0===n.indexOf(e)&&this.remove(n)}},{local:new r("localStorage"),session:new r("sessionStorage")}}),define("common/modules/user-prefs",["common/utils/storage","lodash/objects/defaults"],function(e,t){function n(e,n,r){var i=t(r||{},{type:"local"});p[i.type].set(h+e,n)}function r(e,n){var r=t(n||{},{type:"local"});return p[r.type].get(h+e)}function i(e,n){var r=t(n||{},{type:"local"});p[r.type].remove(h+e)}function o(e,n){var r=t(n||{},{type:"local"});p[r.type].set(h+"switch."+e,!0)}function s(e,n){var r=t(n||{},{type:"local"});p[r.type].set(h+"switch."+e,!1)}function a(e,n){var r=t(n||{},{type:"local"});p[r.type].remove(h+"switch."+e)}function u(e,n){var r=t(n||{},{type:"local"});return p[r.type].get(h+"switch."+e)===!0}function c(e,n){var r=t(n||{},{type:"local"});return p[r.type].get(h+"switch."+e)===!1}function l(e){return!isNaN(e)}function f(e){return"true"===e||"false"===e}function d(e){var t,r,i,a,u,c,d=e.hash.substr(1).split("&");for(u=0,c=d.length;c>u;++u)if(t=d[u].match(/^gu\.prefs\.(.*)=(.*)$/))switch(r=t[1],i=t[2],r){case"switchOn":o(i);break;case"switchOff":s(i);break;default:a=l(i)?+i:f(i)?"true"===String(i).toLowerCase():i,n(r,a)}}var h="gu.prefs.",p={local:e.local,session:e.session};return d(window.location),{set:n,get:r,remove:i,switchOn:o,switchOff:s,removeSwitch:a,isOn:u,isOff:c,setPrefs:d}}),define("common/utils/report-error",["raven"],function(e){return function(t,n,r){if(void 0===r&&(r=!0),e.captureException(t,{tags:n}),r)throw t.reported=!0,t}}),define("common/utils/cookies",["lodash/collections/forEach"],function(e){function t(){return f().domain.replace(/^(www|m\.code|dev|m)\./,".")}function n(t){e(t,function(e){r(e)})}function r(e,n){f().cookie=e+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",n||(f().cookie=e+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT; domain="+t()+";")}function i(e,t,n){var r=new Date;n?r.setDate(r.getDate()+n):(r.setMonth(r.getMonth()+5),r.setDate(1)),f().cookie=e+"="+t+"; path=/; expires="+r.toUTCString()+";"+o()}function o(){var e=t();return"localhost"===e?"":" domain="+e+";"}function s(e,t,n){if(n){var r=new Date;r.setMinutes(r.getMinutes()+n),f().cookie=e+"="+t+"; path=/; expires="+r.toUTCString()+";"+o()}else i(e,t)}function a(e,t){f().cookie=e+"="+t+"; path=/;"+o()}function u(t){var n=[],r=t+"=",i=f().cookie.split(";");return e(i,function(e){for(;" "===e.charAt(0);)e=e.substring(1,e.length);0===e.indexOf(r)&&n.push(e.substring(r.length,e.length))}),n}function c(e){var t=u(e);return t.length>0?t[0]:null}function l(e){d=e}function f(){return d||document}var d;return{cleanUp:n,add:i,addSessionCookie:a,addForMinutes:s,remove:r,get:c,test:{setDocument:l}}}),define("common/modules/analytics/mvt-cookie",["common/utils/cookies"],function(e){function t(t){e.add(o,t,365)}function n(){var t=e.get(a),n=r(),i=e.get(s);return i||(i="unknown-visitor-id"),t||(t="unknown-browser-id"),n||(n="unknown-mvt-id"),i+" "+t+" "+n}function r(){return e.get(o)}function i(){return u}var o="GU_mvt_id",s="s_vi",a="bwid",u=899999;return{getMvtFullId:n,getMvtValue:r,getMvtNumValues:i,overwriteMvtCookie:t,MAX_INT:u}}),define("common/modules/experiments/tests/fronts-on-articles2",["common/utils/config"],function(e){return function(){this.id="FrontsOnArticles2",this.start="2015-12-08",this.expiry="2016-4-1",this.author="Josh Holder",this.description="Inject fronts containers on articles",
this.audience=.06,this.audienceOffset=.3,this.successMeasure="",this.audienceCriteria="All users",this.dataLinkNames="",this.idealOutcome="",this.canRun=function(){return!e.page.isFront&&"childrens-books-site"!==e.page.section&&"LiveBlog"!==e.page.contentType},this.variants=[{id:"control",test:function(){}},{id:"oneAndThree",test:function(){}},{id:"twoAndTwo",test:function(){}}]}}),define("common/modules/experiments/tests/identity-register-v2",[],function(){return function(){this.id="IdentityRegisterV2",this.start="2016-01-27",this.expiry="2016-03-01",this.author="James Pamplin",this.description="New user registration page variant for Identity",this.audience=.2,this.audienceOffset=.5,this.successMeasure="More people register",this.audienceCriteria="everyone",this.dataLinkNames="",this.idealOutcome="More people register",this.canRun=function(){return!1},this.variants=[{id:"A",test:function(){}}]}}),define("common/modules/experiments/tests/identity-sign-in-v2",[],function(){return function(){this.id="IdentitySignInV2",this.start="2015-12-15",this.expiry="2016-03-01",this.author="James Pamplin",this.description="New sign in page variants for Identity",this.audience=.2,this.audienceOffset=.5,this.successMeasure="More people sign in",this.audienceCriteria="everyone",this.dataLinkNames="",this.idealOutcome="More people sign in",this.canRun=function(){return!1},this.variants=[{id:"A",test:function(){}},{id:"B",test:function(){}}]}}),define("common/modules/experiments/tests/liveblog-toast",[],function(){return function(){this.id="LiveblogToast",this.start="2015-1-21",this.expiry="2016-3-1",this.author="Josh Holder",this.description="AB test that enables liveblog toast notifications",this.audience=.25,this.audienceOffset=.5,this.successMeasure="",this.audienceCriteria="All users",this.dataLinkNames="",this.idealOutcome="",this.canRun=function(){return!0},this.variants=[{id:"toast",test:function(){}}]}}),define("lodash/internals/baseFlatten",["../objects/isArguments","../objects/isArray"],function(e,t){function n(r,i,o,s){for(var a=(s||0)-1,u=r?r.length:0,c=[];++a<u;){var l=r[a];if(l&&"object"==typeof l&&"number"==typeof l.length&&(t(l)||e(l))){i||(l=n(l,i,o));var f=-1,d=l.length,h=c.length;for(c.length+=d;++f<d;)c[h++]=l[f]}else o||c.push(l)}return c}return n}),define("lodash/arrays/flatten",["../internals/baseFlatten","../collections/map"],function(e,t){function n(n,r,i,o){return"boolean"!=typeof r&&null!=r&&(o=i,i="function"!=typeof r&&o&&o[r]===n?null:r,r=!1),null!=i&&(n=t(n,i,o)),e(n,r)}return n}),define("lodash/collections/some",["../internals/baseEach","../functions/createCallback","../objects/isArray"],function(e,t,n){function r(r,i,o){var s;if(i=t(i,o,3),n(r))for(var a=-1,u=r.length;++a<u&&!(s=i(r[a],a,r)););else e(r,function(e,t,n){return!(s=i(e,t,n))});return!!s}return r}),define("lodash/collections/find",["../internals/baseEach","../functions/createCallback","../objects/isArray"],function(e,t,n){function r(r,i,o){if(i=t(i,o,3),!n(r)){var s;return e(r,function(e,t,n){return i(e,t,n)?(s=e,!1):void 0}),s}for(var a=-1,u=r.length;++a<u;){var c=r[a];if(i(c,a,r))return c}}return r}),define("lodash/objects/pick",["../internals/baseFlatten","../functions/createCallback","./forIn","./isObject"],function(e,t,n,r){function i(i,o,s){var a={};if("function"!=typeof o)for(var u=-1,c=e(arguments,!0,!1,1),l=r(i)?c.length:0;++u<l;){var f=c[u];f in i&&(a[f]=i[f])}else o=t(o,s,3),n(i,function(e,t,n){o(e,t,n)&&(a[t]=e)});return a}return i}),define("common/modules/experiments/ab",["common/utils/report-error","common/utils/config","common/utils/cookies","common/utils/mediator","common/utils/storage","common/modules/analytics/mvt-cookie","common/modules/experiments/tests/fronts-on-articles2","common/modules/experiments/tests/identity-register-v2","common/modules/experiments/tests/identity-sign-in-v2","common/modules/experiments/tests/liveblog-toast","lodash/arrays/flatten","lodash/collections/forEach","lodash/objects/keys","lodash/collections/some","lodash/collections/filter","lodash/collections/map","lodash/collections/find","lodash/objects/pick","common/utils/chain"],function(e,t,n,r,i,o,s,a,u,c,l,f,d,h,p,m,g,v,y){function b(){return i.local.get(U)||{}}function w(e){var t=b();return t[e.id]}function x(e,t){var n=b();n[e.id]={variant:t},i.local.set(U,n)}function j(e){var t=b();delete t[e.id],i.local.set(U,t)}function k(){var e=b();f(d(e),function(e){if("undefined"==typeof t.switches["ab"+e])j({id:e});else{var n=h(M,function(t){return t.id===e});n||j({id:e})}})}function S(){return p(M,function(e){var t=new Date-new Date(e.expiry)>0;return t?(j(e),!1):!0})}function E(){return p(M,function(e){return new Date-new Date(e.expiry)>0})}function C(e){var n=new Date-new Date(e.expiry)>0,r=t.page.shouldHideAdverts;return(r?e.showForSensitive:!0)&&e.canRun()&&!n&&P(e)}function A(e){var t=p(M,function(t){return t.id===e});return t?t[0]:""}function O(){var e=b(),n=[];return f(d(e),function(t){C(A(t))&&n.push(["AB",t,e[t].variant].join(" | "))}),f(d(t.tests),function(e){e.toLowerCase().match(/^cm/)&&n.push(["AB",e,"variant"].join(" | "))}),f(I(),function(e){n.push("AB | "+e+" | inTest")}),n.join(",")}function _(e){if(w(e)&&C(e)){var t=b(),n=t[e.id].variant,r=q(e,n);r?r.test():"notintest"===n&&e.notInTest&&e.notInTest()}}function T(e){if(C(e)&&!w(e)){var t,n,r=o.getMvtNumValues()*e.audienceOffset,i=r+o.getMvtNumValues()*e.audience,s=o.getMvtValue();s&&s>r&&i>=s?(t=m(e.variants,function(e){return e.id}),n=s%t.length,x(e,t[n])):x(e,"notintest")}}function P(e){return t.switches["ab"+e.id]}function R(e){var t=b()[e];return t&&t.variant}function N(e,t){var n=b();n[e]&&(n[e].variant=t,i.local.set(U,n))}function L(e,t){var n=A(e);return n&&w(n)&&H.getTestVariantId(e)===t&&C(n)}function q(e,t){return g(e.variants,function(e){return e.id===t})}function I(){return y(t.tests).and(v,function(e){return!!e}).and(d).value()}var M=l([new s,new a,new u,new c]),U="gu.ab.participations",H={addTest:function(e){M.push(e)},clearTests:function(){M=[]},segment:function(){f(S(),function(e){T(e)})},forceSegment:function(e,t){y(S()).and(p,function(t){return t.id===e}).and(f,function(e){x(e,t)}).valueOf()},segmentUser:function(){var e,t=/^#ab/.test(window.location.hash);t?(e=window.location.hash.replace("#ab-","").split(","),f(e,function(e){var t,n,r;t=e.split("="),n=t[0],r=t[1],H.forceSegment(n,r)})):H.segment(),k()},run:function(){f(S(),function(e){_(e)})},isEventApplicableToAnActiveTest:function(e){var t=d(b());return h(t,function(t){var n=A(t).events;return h(n,function(t){return 0===e.indexOf(t)})})},getActiveTestsEventIsApplicableTo:function(e){function t(e,t){return 0===e.indexOf(t)}var n=e.tag;return n&&y(S()).and(p,function(e){var r=e.events;return r&&h(r,function(e){return t(n,e)})}).and(m,function(e){return e.id}).valueOf()},getAbLoggableObject:function(){var t={};try{f(S(),function(e){if(w(e)&&C(e)){var n=R(e.id);n&&"notintest"!==n&&(t["ab"+e.id]=n)}}),f(I(),function(e){t["ab"+e]="inTest"})}catch(n){t={},e(n,!1)}return t},getParticipations:b,isParticipating:w,getTest:A,makeOmnitureTag:O,getExpiredTests:E,getActiveTests:S,getTestVariantId:R,setTestVariant:N,getVariant:q,testCanBeRun:function(e){return"string"==typeof e?C(g(M,function(t){return t.id===e})):e.id&&e.expiry&&C(e)},isInVariant:function(e,t){return H.getParticipations()[e]&&H.getParticipations()[e].variant===t&&H.testCanBeRun(e)},shouldRunTest:L,reset:function(){M=[]}};return H}),window.matchMedia||(window.matchMedia=function(){"use strict";var e,t,n,r=window.styleMedia||window.media;return r||(e=document.createElement("style"),t=document.getElementsByTagName("script")[0],n=null,e.type="text/css",e.id="matchmediajs-test",t.parentNode.insertBefore(e,t),n="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,r={matchMedium:function(t){var r="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=r:e.textContent=r,"1px"===n.width}}),function(e){return{matches:r.matchMedium(e||"all"),media:e||"all"}}}()),define("picturefill",["fastdom"],function(e){return function(t,n,r){"use strict";function i(r){var i,a,u,c,l,f=r||{};i=f.elements||o.getAllElements,e.read(function(){o.viewportWidth=Math.max(t.innerWidth||0,n.documentElement.clientWidth);for(var e=0,r=i.length;r>e;e++)if(a=i[e],u=a.parentNode,c=void 0,l=void 0,"IMG"===a.nodeName.toUpperCase()&&(a[o.ns]||(a[o.ns]={}),f.reevaluate||!a[o.ns].evaluated)){if(u&&"PICTURE"===u.nodeName.toUpperCase()){if(o.removeVideoShim(u),c=o.getMatch(a,u),c===!1)continue}else c=void 0;(u&&"PICTURE"===u.nodeName.toUpperCase()||!o.sizesSupported&&a.srcset&&s.test(a.srcset))&&o.dodgeSrcset(a),c?(l=o.processSourceSet(c),o.applyBestCandidate(l,a)):(l=o.processSourceSet(a),(void 0===a.srcset||a[o.ns].srcset)&&o.applyBestCandidate(l,a)),a[o.ns].evaluated=!0}})}if(t.HTMLPictureElement)return function(){};n.createElement("picture");var o=t.picturefill||{},s=/\s+\+?\d+(e\d+)?w/;return o.ns="picturefill",function(){o.srcsetSupported="srcset"in r,o.sizesSupported="sizes"in r,o.curSrcSupported="currentSrc"in r}(),o.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},o.makeUrl=function(){var e=n.createElement("a");return function(t){return e.href=t,e.href}}(),o.canMatchMedia=t.matchMedia&&t.matchMedia("(min-width: 0px)").matches,o.matchesMedia=function(e){return o.canMatchMedia?t.matchMedia&&t.matchMedia(e).matches:!0},o.getDpr=function(){return t.devicePixelRatio||1},o.getWidthFromLength=function(e){return e=e.replace("vw","%"),e=e.indexOf("%")>-1?o.viewportWidth*parseInt(e,10)*.01:parseInt(e,10)},o.parseSize=function(e){var t=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:t&&t[1],length:t&&t[2]}},o.findWidthFromSourceSize=function(e){var t,n,r,i,s,a,u,c=o.trim(e).split(/\s*,\s*/);for(n=0,r=c.length;r>n&&(i=c[n],s=o.parseSize(i),a=s.length,u=s.media,!a||u&&!o.matchesMedia(u)||!(t=o.getWidthFromLength(a)));n++);return t||o.viewportWidth},o.parseSrcset=function(e){for(var t,n,r,i,o,s=[];""!==e;)e=e.replace(/^\s+/g,""),t=e.search(/\s/g),r=null,-1!==t?(n=e.slice(0,t),i=n.slice(-1),(","===i||""===n)&&(n=n.replace(/,+$/,""),r=""),e=e.slice(t+1),null===r&&(o=e.indexOf(","),-1!==o?(r=e.slice(0,o),e=e.slice(o+1)):(r=e,e=""))):(n=e,e=""),(n||r)&&s.push({url:n,descriptor:r});return s},o.parseDescriptor=function(e,t){var n,r,i,s,a,u,c=t||"100vw",l=e&&e.replace(/(^\s+|\s+$)/g,""),f=o.findWidthFromSourceSize(c);if(l)for(r=l.split(" "),i=r.length-1;i>=0;i--)s=r[i],u=s&&s.slice(s.length-1),"h"!==u&&"w"!==u||o.sizesSupported?"x"===u&&(a=s&&parseFloat(s,10),n=a&&!isNaN(a)?a:1):n=parseFloat(parseInt(s,10)/f);return n||1},o.getCandidatesFromSourceSet=function(e,t){var n,r,i,s=o.parseSrcset(e),a=[];for(r=0,i=s.length;i>r;r++)n=s[r],a.push({url:n.url,resolution:o.parseDescriptor(n.descriptor,t)});return a},o.dodgeSrcset=function(e){e.srcset&&(e[o.ns].srcset=e.srcset,e.srcset="",e.setAttribute("data-pfsrcset",e[o.ns].srcset))},o.processSourceSet=function(e){var t=e.getAttribute("srcset"),n=e.getAttribute("sizes"),r=[];return"IMG"===e.nodeName.toUpperCase()&&e[o.ns]&&e[o.ns].srcset&&(t=e[o.ns].srcset),t&&(r=o.getCandidatesFromSourceSet(t,n)),r},o.applyBestCandidate=function(t,n){var r,i,s,a;for(t.sort(o.ascendingSort),i=t.length,s=t[i-1],a=0;i>a;a++)if(r=t[a],r.resolution>=o.getDpr()){s=r;break}s&&(s.url=o.makeUrl(s.url),n.src!==s.url&&e.write(function(){n.src=s.url,o.curSrcSupported||(n.currentSrc=n.src)}))},o.ascendingSort=function(e,t){return e.resolution-t.resolution},o.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){for(var n=t[0],r=n.getElementsByTagName("source");r.length;)e.insertBefore(r[0],n);n.parentNode.removeChild(n)}},o.getAllElements=function(){var e,t,r,i=[],s=n.getElementsByTagName("img");for(t=0,r=s.length;r>t;t++)e=s[t],("PICTURE"===e.parentNode.nodeName.toUpperCase()||null!==e.getAttribute("srcset")||e[o.ns]&&null!==e[o.ns].srcset)&&i.push(e);return i},o.getMatch=function(e,t){for(var n,r=t.childNodes,i=0,s=r.length;s>i;i++){var a=r[i];if(1===a.nodeType){if(a===e)return n;if("SOURCE"===a.nodeName.toUpperCase()){null!==a.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var u=a.getAttribute("media");if(a.getAttribute("srcset")&&(!u||o.matchesMedia(u))){n=a;break}}}}return n},i._=o,i}(window,window.document,new window.Image)}),define("common/utils/$css",[],function(){return function(e,t){return window.document.defaultView&&window.document.defaultView.getComputedStyle?e.css(t):e[0].currentStyle[t]}}),define("common/modules/ui/images",["bonzo","picturefill","common/utils/$","common/utils/$css","common/utils/mediator"],function(e,t,n,r,i){var o={upgradePictures:function(e){var r=[].slice.call(n("img[srcset], picture img",e||document.body));t({elements:r})},listen:function(){i.addListeners({"ui:images:upgradePictures":o.upgradePictures})}};return o}),define("common/utils/atob",[],function(){return window.atob?function(e){return window.atob(e)}:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t=function(){try{document.createElement("$")}catch(e){return e}}();return function(n){if(n=n.replace(/[=]+$/,""),n.length%4===1)throw t;for(var r,i,o=0,s=0,a="";i=n.charAt(s++);~i&&(r=o%4?64*r+i:i,o++%4)?a+=String.fromCharCode(255&r>>(-2*o&6)):0)i=e.indexOf(i);return a}}()}),define("common/modules/asyncCallMerger",[],function(){function e(e){function t(){s=arguments,o="complete";for(var e=0;e<i.length;e++)i[e].apply(null,s)}function n(n){"init"===o?(o="waiting",i.push(n),e(t)):"waiting"===o?i.push(n):n.apply(null,s)}function r(){i=[],o="init",s=null}var i,o,s;return r(),n.reset=r,n}return{mergeCalls:e}}),define("common/modules/identity/api",["common/utils/ajax","common/utils/atob","common/utils/config","common/utils/cookies","common/utils/mediator","common/utils/storage","common/modules/asyncCallMerger"],function(e,t,n,r,i,o,s){var a={},u=null;return a.cookieName="GU_U",a.signOutCookieName="GU_SO",a.fbCheckKey="gu.id.nextFbCheck",a.lastRefreshKey="identity.lastRefresh",a.idApiRoot=null,a.idUrl=null,a.init=function(){a.idApiRoot=n.page.idApiUrl,a.idUrl=n.page.idUrl,i.emit("module:identity:api:loaded")},a.reset=function(){a.getUserFromApi.reset(),u=null},a.getUserFromCookie=function(){if(null===u){var e=r.get(a.cookieName),t=e?JSON.parse(a.decodeBase64(e.split(".")[0])):null;t&&(u={id:t[0],primaryEmailAddress:t[1],displayName:t[2],accountCreatedDate:t[6],emailVerified:t[7],rawResponse:e})}return u},a.getCookie=function(){return r.get(a.cookieName)},a.isUserLoggedIn=function(){return null!==a.getUserFromCookie()},a.getUrl=function(){return a.idUrl},a.getUserFromApi=s.mergeCalls(function(t){a.isUserLoggedIn()?e({url:a.idApiRoot+"/user/me",type:"jsonp",crossOrigin:!0}).then(function(e){t("ok"===e.status?e.user:null)}):t(null)}),a.getUserFromApiWithRefreshedCookie=function(){var t="/user/me",n=e({url:a.idApiRoot+t,type:"jsonp",data:{refreshCookie:!0}});return n},a.getUserOrSignIn=function(e){if(a.isUserLoggedIn())return a.getUserFromCookie();e=encodeURIComponent(e||document.location.href);var t=a.getUrl()+"/signin?returnUrl="+e;a.redirectTo(t)},a.redirectTo=function(e){window.location.href=e},a.decodeBase64=function(e){return decodeURIComponent(escape(t(e.replace(/-/g,"+").replace(/_/g,"/").replace(/,/g,"="))))},a.hasUserSignedOutInTheLast24Hours=function(){var e=r.get(a.signOutCookieName);return e?Math.round((new Date).getTime()/1e3)<parseInt(e,10)+86400:!1},a.shouldAutoSigninInUser=function(){var e=!!r.get(a.cookieName),t=!!o.local.get(a.fbCheckKey);return!e&&!t&&!this.hasUserSignedOutInTheLast24Hours()},a.setNextFbCheckTime=function(e){o.local.set(a.fbCheckKey,{},{expires:e})},a.emailSignup=function(t){var n="/useremails/"+a.getUserFromCookie().id+"/subscriptions",r={listId:t},i=e({url:a.idApiRoot+n,type:"jsonp",crossOrigin:!0,data:{body:JSON.stringify(r),method:"post"}});return i},a.sendValidationEmail=function(){var t="/user/send-validation-email",n=e({url:a.idApiRoot+t,type:"jsonp",crossOrigin:!0,data:{method:"post"}});return n},a.getSavedArticles=function(){var t="/syncedPrefs/me/savedArticles",n=e({url:a.idApiRoot+t,type:"jsonp",crossOrigin:!0});return n},a.saveToArticles=function(t){var r="/syncedPrefs/cors/me/savedArticles",i=e({url:a.idApiRoot+r,type:"json",crossOrigin:!0,method:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),withCredentials:!0,headers:{"X-GU-ID-Client-Access-Token":"Bearer "+n.page.idApiJsClientToken}});return i},a}),define("common/utils/robust",["common/utils/report-error","lodash/collections/forEach","lodash/collections/map"],function(e,t,n){function r(e){return n(e,function(e){return s.bind(this,e[0],e[1])})}var i=function(e){var t;try{e()}catch(n){t=n}return t},o=function(t,n,r){window.console&&window.console.warn&&window.console.warn("Caught error.",n.stack),r||(r=e),r(n,{module:t},!1)},s=function(e,t,n){var r=i(t);r&&o(e,r,n)},a=function(e){t(e,function(e){var t=e[0],n=e[1];s(t,n)})};return{catchErrorsAndLog:s,catchErrorsAndLogAll:a,makeBlocks:r,log:o}}),define("bootstraps/standard/main",["raven","fastdom","common/modules/user-prefs","common/modules/experiments/ab","common/modules/ui/images","common/utils/storage","common/utils/$","common/utils/ajax","common/utils/mediator","common/modules/identity/api","common/utils/url","common/utils/cookies","common/utils/robust"],function(e,t,n,r,i,o,s,a,u,c,l,f,d){return function(){function h(){b||(b=!0,t.read(function(){u.emitEvent("window:throttledScroll"),b=!1}))}var p=window.guardian,m=p.config;e.config("http://"+m.page.sentryPublicApiKey+"@"+m.page.sentryHost,{whitelistUrls:[/localhost/,/assets\.guim\.co\.uk/,/ophan\.co\.uk/],tags:{edition:m.page.edition,contentType:m.page.contentType,revisionNumber:m.page.revisionNumber,loaderType:"Curl"},dataCallback:function(e){return e.culprit&&(e.culprit=e.culprit.replace(/\/[a-z\d]{32}(\/[^\/]+)$/,"$1")),e.tags.origin=/j.ophan.co.uk/.test(e.culprit)?"ophan":"app",e},shouldSendCallback:function(e){var t=m.page.isDev;return t&&window.console&&window.console.warn&&window.console.warn("Raven captured error.",e),m.switches.diagnosticsLogging&&Math.random()<.2&&!t}}),e.install();var g=window.onerror;window.onerror=function(e,t,n,r,i){i&&i.reported||g.apply(window,arguments)},window.addEventListener||(window.addEventListener=window.attachEvent),window.addEventListener("unhandledRejection",function(t){var n=t.detail.reason;n&&!n.reported&&e.captureException(n)}),d.catchErrorsAndLog("ab-tests",function(){p.isModernBrowser&&(r.segmentUser(),r.run())});var v=function(){var e=l.getUrlVars();"clear"===e.adtest?f.remove("adtest"):e.adtest&&f.add("adtest",encodeURIComponent(e.adtest),10)};v(),m.page.isFront&&(document.addEventListener||(window.onload=i.upgradePictures)),i.upgradePictures(),i.listen();var y;p.isModernBrowser&&(y=o.local.get("gu.alreadyVisited")||0,o.local.set("gu.alreadyVisited",y+1));var b=!1;if(window.addEventListener("scroll",n.get("use-idle-callback")&&"requestIdleCallback"in window?function(){window.requestIdleCallback(h)}:h),m.page.requiresMembershipAccess){var w=m.page.membershipUrl,x=m.page.membershipAccess,j=-1!==x.indexOf("paid-members-only"),k=w+"/choose-tier?membershipAccess="+x,S=function(){window.location.href=k};c.isUserLoggedIn()?a({url:w+"/user/me",type:"json",crossOrigin:!0,withCredentials:!0}).then(function(e){var t=j?!!e.tier&&e.isPaidTier:!!e.tier;t?s("body").removeClass("has-membership-access-requirement"):S()}).fail(function(){S()}):S()}try{"repeat"in String.prototype&&!m.page.isDev&&window.console.log("\n%cHello.\n\n%cWe are hiring â€“ ever thought about joining us? \n%chttp://developers.theguardian.com/join-the-team.html%c \n\n","font-family: Georgia, serif; font-size: 32px; color: #005689","font-family: Georgia, serif; font-size: 16px; color: #767676","font-family: Helvetica Neue, sans-serif; font-size: 11px; text-decoration: underline; line-height: 1.2rem; color: #767676","")}catch(E){}}}),require(["boot"]);
//# sourceMappingURL=boot.js.map