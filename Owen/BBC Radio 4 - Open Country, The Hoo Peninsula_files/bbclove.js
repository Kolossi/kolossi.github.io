/*! bbc-pal-love - v2.0.2 - 2015-11-13 */

define("lovedom",["require","exports","module"],function(e,t){var n,r={addClass:function(e,t){n(e).addClass(t)},findElement:function(e){return n(e)},find:function(e,t){return n(e).find(t)},children:function(e,t){return n(e).children(t)},parent:function(e,t){return n(e).parent(t)},removeClass:function(e,t){n(e).removeClass(t)},on:function(e,t,r,i){n(e).on(t,r,i)},bind:function(e,t,n){e.bind(t,n)},scroll:function(e){n(window).scroll(e)},onElem:function(e,t,r){n(e).on(t,r)},off:function(e,t){n(e).off(t)},is:function(e,t){return n(e).is(t)},next:function(e){return n(e).next()},hasClass:function(e,t){return n(e).hasClass(t)},offset:function(e){return n(e).offset()},outerWidth:function(e){return n(e).outerWidth()},outerHeight:function(e){return n(e).outerHeight()},closest:function(e,t){return n(e).closest(t)},attr:function(e,t){return n(e).attr(t)},addAttr:function(e,t,r){return n(e).attr(t,r)},resize:function(e){n(window).resize(e)},toggleClass:function(e,t){n(e).toggleClass(t)},each:function(e,t){n(e).each(t)},each2:function(e,t){n.each(e,t)},extend:function(e,t,r){typeof e!="undefined"?n.extend(t,r):n.extend(e,t,r)},css:function(e,t,r){return r!==undefined?n(e).css(t,r):n(e).css(t)},append:function(e,t){n(e).append(t)},appendTo:function(e,t){n(e).appendTo(n(t))},ajax:function(e){n.ajax(e)},serialize:function(e){return n(e).serialize()},serializeArray:function(e){return n(e).serializeArray()},html:function(e){return n(e).html()},setHtml:function(e,t){return n(e).html(t)},focus:function(e){n(e).focus()},blur:function(e){n(e).blur()},fadeIn:function(e,t,r){n(e).fadeIn(t,r)},fadeOut:function(e,t,r){n(e).fadeOut(t,r)},contains:function(e,t){return n.contains(e,t)},replaceWith:function(e,t){n(e).replaceWith(t)},getByDataAttributeValue:function(e,t){return n("*["+e+'="'+t+'"]')},map:function(e,t){n.map(e,t)},trigger:function(e,t){n(e).trigger(t)},j:function(){return n}};return t.init=function(t){n?t(r):e(["jquery-1.9"],function(e){n=e,t(r)})},t}),define("lovelocale",{"cy-gb":{Love:"Caru hwn",Loved:"Yn ei garu'n barod",Unlove:"Peidio'i garu","Thanks for that.":"Diolch am garu hwn","See what other people are loving":"Beth mae pobl eraill yn ei garu","Sign up for the BBC newsletter":"Tanysgrifiwch i dderbyn cylchlythyr y BBC","Get better recommendations":"Argymhellion gwell wedi eu seilio ar beth rydych chi’n ei garu","Give you better recommendations":"Byddwn ni’n defnyddio hwn i roi argymhellion gwell i chi.","Find out more":"Mwy","Somethings gone wrong":"Aeth rhywbeth o’i le","Please try again later":"Triwch eto nes ymlaen.",Close:"Cau"},"ga-gb":{Love:"Gráigh",Loved:"Gráite",Unlove:"Díghráigh","Thanks for that.":"Buíochas as seo a ghrá","See what other people are loving":"Amharc cad é atá á ghrá ag daoine eile?","Sign up for the BBC newsletter":"Cláraigh do nuachtlitir BBC","Get better recommendations":"Faigh moltaí níos fearr bunaithe ar an inneachar a ghránn tú","Give you better recommendations":"Bainfidh muid úsáid as seo le moltaí níos fearr a thabhairt duit.","Find out more":"Faigh tuilleadh eolais","Somethings gone wrong":"Theip ar rud éigin","Please try again later":"Triail arís níos moille le do thoil.",Close:"Dùin"},"gd-gb":{Love:"Rùnaich",Loved:"Rùnaichte",Unlove:"Neo-rùnaich","Thanks for that.":"Tapadh leat airson seo a rùnachadh","See what other people are loving":"Faic dè tha daoine eile a’ rùnachadh","Sign up for the BBC newsletter":"Clàraich airson brath-naidheachd a’ BhBC","Get better recommendations":"Faigh molaidhean stèidhichte air na tha còrdadh riut","Give you better recommendations":"Cleachdaidh sinn seo airson molaidhean nas fheàrr a thabhainn.","Find out more":"Tuilleadh fiosrachaidh","Somethings gone wrong":"Tha rudeigin ceàrr","Please try again later":"Feuch a-rithist.",Close:"Druid"},"en-gb":{Love:"Love",Loved:"Loved",Unlove:"Unlove","Thanks for that.":"Thanks for loving this","See what other people are loving":"See what other people are loving","Sign up for the BBC newsletter":"Sign up for the BBC newsletter","Get better recommendations":"Get better recommendations based on what you love","Give you better recommendations":"We’ll use this to give you better recommendations.","Find out more":"Find out more","Somethings gone wrong":"Something’s gone wrong","Please try again later":"Please try again later.",Close:"Close"}}),define("bbclovetranslate",["exports","lovelocale"],function(e){return e=e||{},e={normaliseLocale:function(e){e=typeof e=="string"&&e.toLowerCase()||"en-gb";var t={en:"en-gb",cy:"cy-gb",ga:"ga-gb",gd:"gd-gb","en-gb":"en-gb","cy-gb":"cy-gb","ga-gb":"ga-gb","gd-gb":"gd-gb"};return t[e]||"en-gb"},getTranslations:function(e,t,n){var r=require("lovelocale"),i;return e=this.normaliseLocale(e),i=r[e][t],typeof n!="undefined"&&(i=i.replace("%s",n)),i}},e}),define("bbclove/adapter/stats",["require","exports","module"],function(e,t){var n,r,i={log:function(e,t,r,i){r=r||{},i=i||{},n.log(e,t,r,i)},linkTrack:function(e){n.track("internal",{region:e,linkLocation:"lovePanel"})}};t.init=function(t){n?t(i):e(["istats-1"],function(e){n=e,t(i)})}}),define("bbcpolyfill",["lovedom"],function(e,t){return t={init:function(){var e=this;e.setStorage()},windowLocationOriginPrototype:function(){return window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},mapPrototype:function(){Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if(typeof e!="function")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;if(i in s){var f=i.toString();u=s[f],a=e.call(n,u,i,s),r[f]=a}i++}return r}},indexOfPrototype:function(){Array.prototype.indexOf=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:r!==0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}}},t}),define("bbcstorage",["lovedom","bbcpolyfill"],function(e,t,n){var r=["css","js","redirect_uri"],i;return n={init:function(){var e=this;e.setStorage()},setStorage:function(){var e=this;Array.prototype.indexOf||t.indexOfPrototype(),e.parseAllButtons(r);return},getStorage:function(){return i},getButtonConfig:function(e){try{if(typeof i[e]=="undefined")throw e;return i[e]}catch(t){return console.error("Can't read ",e,"configuration from stored confs. Seems to be eaten by werewolves."),console.error("... or store module doesn't work"),"error"}},setButtonConfig:function(e){var t=this;t.init(),i[e.loveId]=null,i[e.loveId]=t.parseButton(e);return},updateButtonConfig:function(e,t){for(var n in e)i[t.loveId].option=n;return},parseButton:function(e){for(var t in e)if(t=="networks")for(var n=0;n<e.networks.length;n++)e.networks[n]=e.networks[n].name;return e},parseAllButtons:function(){e.init(function(e){var t={},n={},s=[],o="",u="";e.each(e.findElement(".l-b-container"),function(){u=e.attr(e.find(this,".l-b-button"),"id"),e.each2(e.serializeArray(e.find(this,"form")),function(){r.indexOf(this.name)==-1&&(n[this.name]=this.value)}),t[u]=n,n={},e.each2(e.find(this,".l-b-panel ul a"),function(){o=e.attr(this,"data-network"),s.push(o),t[u].networks=s}),s=[]}),i=t});return}},n}),define("bbccookie",[""],function(){var e=e||{};return e={init:function(){try{this.productAliases={iplayer:"ipl",homepage:"hpg",radio:"rdo",news:"nws",sport:"spt",programmes:"prg",weather:"wth",cbeebies:"cbb",cbbc:"cbc",tv:"tv",arts:"art",entertainment:"ent",food:"fd",health:"hth",history:"hst",learning:"lng",local:"loc",music:"mus",science:"sn"},this.name="ckps_love",this.policyCookieName="ckns_policy",this.defaultValue={lb:[]},this.maxSize=50,this.ttl=300,this.str="",this.raw={},this.data={},this.content={key:"",status:""}}catch(e){throw e}},getCookieValue:function(e){try{var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)===" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return!1}catch(s){return!1}},areCookiesEnabled:function(){try{var e=this.getCookieValue(this.policyCookieName),t=e.split("");return t[1]==="1"}catch(n){return!1}},getLoveCookie:function(e,t){try{var n;return t?n=this.getCookieValue(this.name+"_"+e):n=this.getCookieValue(this.name),n?n:(this.str=JSON.stringify(this.defaultValue),this.raw=this.defaultValue,this.set(this.raw,e,t),this.str)}catch(r){}},parseLoveCookie:function(e,t){try{return this.raw=JSON.parse(this.getLoveCookie(e,t)),this.raw}catch(n){throw n}},set:function(e,t,n){try{var r=new Date,i;r.setTime(r.getTime()+this.ttl*24*60*60*1e3);var s="; expires="+r.toGMTString();n?i=this.name+"_"+t:i=this.name;var o=i+"="+JSON.stringify(e)+s+"; path=/";return document.cookie=o,o}catch(u){throw u}},update:function(e,t){try{Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);for(;n<t;n++)if(n in this&&this[n]===e)return n;return-1});var n=this.parseLoveCookie(e.userId,e.useIdCta),r=n,i=this.getContentKey(e);if(t==="loved")n.lb.indexOf(i)===-1&&(n.lb.length>=this.maxSize&&n.lb.pop(),n.lb.unshift(i));else{if(t!=="unloved")return!1;var s=n.lb.indexOf(i);s>-1&&n.lb.splice(s,1)}return this.raw=n,this.set(this.raw,e.userId,e.useIdCta),!0}catch(o){return this.raw=r,!1}},setMetadata:function(){},getContentKey:function(e){try{return e.contentId}catch(t){throw t}},getFunctionalCookieStatus:function(){try{return typeof window.bbccookies=="object"?window.bbccookies.readPolicy().personalisation:e.areCookiesEnabled()}catch(t){return!1}},getLovedStatus:function(e){try{var t="",n=this.getContentKey(e),r=Array.prototype.indexOf?this.parseLoveCookie(e.userId,e.useIdCta).lb.indexOf(n):this.getKeyIndex(this.parseLoveCookie(e.userId,e.useIdCta).lb,n);return t=r===-1?"not-loved":"loved",this.content.key=n,this.content.status=t,this.data.key=this.content,t}catch(i){return!1}},"delete":function(){try{}catch(e){}},getKeyIndex:function(e,t){try{var n=e.length;for(var r=0;r<n;r++)if(e[r]==t)return r;return-1}catch(i){return!1}},idCookieRecentlyUpdated:function(){try{var e=new Date,t=this.getCookieValue("IDENTITY"),n=t.split("%7C"),r=e.getTime(),i=r-15e3;return n[3]<=r&&n[3]>=i?!0:!1}catch(s){return!1}},canShowPanel:function(e,t){try{var n=new Date,r="ckps_lovePanelView_"+e;if(this.getCookieValue(r)=="true"||!t)return!1;n.setTime(n.getTime()+864e6);var i="; expires="+n.toGMTString(),s=r+"=true"+i+"; path=/";return document.cookie=s,!0}catch(o){return!1}},test:function(){console.log("ck___test")}},e.init(),e}),define("bbcloveuas",[""],function(){var e=e||{};return e={init:function(){try{}catch(e){throw e}},update:function(e,t,n){var r=e,i=t;if(r.availability!=null)var s='{"availability":'+r.availability+"}";else var s="{}";require(["uasclient"],function(e){e.init({apiKey:r.uasKey,env:r.uasEnv,domainSuffix:"co.uk",baseUri:"",timeout:"4000"}),e.create({activityType:"loves",resourceDomain:r.resourceDomain,resourceType:r.resourceType,resourceId:r.contentId,action:i,metaData:s},function(e,t){n(e,t)})})}},e.init(),e}),define("bbclove/ui/love-view",["lovedom","bbclovetranslate","bbclove/adapter/stats","bbcstorage","bbcpolyfill","exports","bbccookie","bbcloveuas"],function(e,t,n,r,i,s,o,u,a,f){return u=!1,o={stats:{actionType:"love_button",actionName:"%love_action%"},init:function(e){this.options=e,this.selector="."+o.classes.container,this.container={},this.button={},this.$panel={},this.windowSize=[],this.attachEvents(),this.dragging=!1,this.embedId="",this.enableLinkTracking()},attachEvents:function(){var t=this,n;e.init(function(e){n=document.getElementById(t.options.loveId).parentNode.parentNode,t.bindOffPanelClick(e,"body"),e.onElem(window,"orientationchange",function(){t.checkForActivePanels(e),t.panelClose(e)}),e.on("body","keydown",n,function(n){var r=t.getEventCode(n),i=t.options.loveId,s=e.findElement("#"+i+"-panel");r==9&&e.hasClass(s,o.classes.panelOpen)?setTimeout(function(){e.focus("#"+i+"-panel"+" .l-b-tab:eq(0)")},5):r==27&&e.hasClass(s,o.classes.panelOpen)&&t.checkForActivePanels(e)}),e.on("body","keydown","a.l-b-link, a.l-b-p-close",function(n){var r=t.getEventCode(n),i=e.attr(e.closest(e.findElement(this),"."+o.classes.panel),"id"),s=i.replace("-panel","");r==27&&e.hasClass(e.findElement("#"+i),o.classes.panelOpen)&&(e.focus(e.findElement("#"+s)),t.checkForActivePanels(e))}),e.on("body","touchstart",t.selector,function(){t.removeClasses(this,{"hover-state":"hover-state"},e)}),e.j()(n).find("form").on("submit",function(e){e.preventDefault()}),e.onElem(n,"click",function(n){n.preventDefault(),t.button.ID=e.attr(e.find(e.findElement(this),"."+o.classes.button),"id"),t.getButtonPosition(e,t.button.ID);var r=e.attr(this,"data-content-id"),i=e.attr(this,"data-product-id"),s=e.attr(this,"data-resourceDomain"),u=e.attr(this,"data-resourceType"),a=e.attr(this,"data-availability");switch(a){case"true":a=!0;break;case"false":a=!1;break;default:a=null}var f=e.attr(this,"data-locale");t.$panel=e.findElement("#"+t.button.ID+"-panel"),t.$panel.ID=e.attr(t.$panel,"id"),t.$panel.currFontSize=e.css("#"+t.button.ID,"font-size"),t.$panel.variantPanel=e.attr(t.$panel,"data-variant"),e.css("#"+t.$panel.ID,"font-size",t.$panel.currFontSize),t.container=e.parent(e.findElement(this),"."+o.classes.masterContainer),t.container.version=t.container.version||e.attr(t.container,"data-version"),t.container.variant=e.attr(t.container,"data-variant"),t.container.contentType=e.attr(t.container,"data-content-type"),t.container.contentUrl=e.attr(t.container,"data-content-url");var l=e.getByDataAttributeValue("data-content-id",r),c,h;if(t.options.signedIn||!t.options.useIdCta){var p={productId:i,contentId:r,resourceDomain:s,resourceType:u,availability:a,userId:t.options.userId,useIdCta:t.options.useIdCta,uasKey:t.options.uasKey,uasEnv:t.options.uasEnv},d=t.cookie.getLovedStatus(p),v=d==="not-loved"?"loved":"unloved";t.options.useIdCta&&t.loveUas.update(p,v,function(n,s){n&&(v=="loved"?(v="unloved",t.unlovedToLoved(e,l,f,r,i)):(v="loved",t.lovedToUnloved(e,l,f,r,i)),t.cookie.update(p,v),t.panelOpen(e,!1))}),h=t.cookie.update(p,v)}else h=!1,t.addClasses(this,{"panel-open":"panel-open"},e),t.panelOpen(e);if((t.options.signedIn||!t.options.useIdCta)&&h===!0){d==="loved"?t.unlovedToLoved(e,l,f,r,i):t.lovedToUnloved(e,l,f,r,i),this.getAttribute("aria-pressed")==="false"?this.setAttribute("aria-pressed","true"):this.setAttribute("aria-pressed","false");var m=typeof t.eventEmitter;m!=="undefined"&&m==="object"?t.eventEmitter.started.dispatch({foo:"bar"}):""}else t.options.signedIn&&t.panelOpen(e,!1)}),e.on("body","click ","."+o.classes.panelClose,function(n){var r=e.attr(e.closest(e.findElement(this),"."+o.classes.panel),"id"),i=r.replace("-panel","");return n.preventDefault(),n.stopPropagation(),t.checkForActivePanels(e),t.panelClose(e,1),e.focus(e.findElement("#"+i)),!1}),e.resize(function(){e.blur("#"+t.button.ID),"ontouchstart"in document.body||(t.checkForActivePanels(e),t.panelClose(e))}),e.onElem("#"+e.attr(n,"data-button-id")+"-panel ."+o.classes.panelLinks+" a","click",function(n){var r=e.parent(this),i=e.attr(this,"data-link-type"),s=e.attr(r,"data-content-id"),o=e.attr(r,"data-product-id");t.trackLoveClick(i,s,o)})})},unlovedToLoved:function(e,n,r,i,s){var o=this,u=e.find(n,".lb-btn-txt-nm"),a=e.find(n,".lb-btn-txt-hv"),f=t.getTranslations(r,"Love"),l=e.find(n,".l-b-gelicon.l-b-icon-nm"),c=e.find(n,".l-b-gelicon.l-b-icon-hv");o.removeClasses(n,{loved:"loved"},e),o.removeClasses(l,{"gelicon--love":"gelicon--love"},e),o.addClasses(l,{"gelicon--love-outline":"gelicon--love-outline"},e),o.removeClasses(c,{"gelicon--love-outline":"gelicon--love-outline"},e),o.addClasses(c,{"gelicon--love":"gelicon--love"},e),e.setHtml(u,f),e.setHtml(a,f),o.panelClose(e),o.trackLoveClick("unlove",i,s)},lovedToUnloved:function(e,n,r,i,s){var o=this,u=e.find(n,".lb-btn-txt-nm"),a=e.find(n,".lb-btn-txt-hv"),f=t.getTranslations(r,"Love"),l=t.getTranslations(r,"Loved"),c=t.getTranslations(r,"Unlove"),h=e.find(n,".l-b-gelicon.l-b-icon-nm"),p=e.find(n,".l-b-gelicon.l-b-icon-hv");o.addClasses(n,{loved:"loved"},e),o.addClasses(this,{"panel-open":"panel-open"},e),o.removeClasses(h,{"gelicon--love-outline":"gelicon--love-outline"},e),o.addClasses(h,{"gelicon--love":"gelicon--love"},e),o.removeClasses(p,{"gelicon--love":"gelicon--love"},e),o.addClasses(p,{"gelicon--love-outline":"gelicon--love-outline"},e),e.setHtml(u,l),e.setHtml(a,c),(o.cookie.canShowPanel(o.options.userId,o.options.signedIn)&&o.options.useIdCta||!o.options.useIdCta)&&o.panelOpen(e),o.populateTabIndex(e),e.focus(e.findElement("#"+o.button.ID)),o.trackLoveClick("love",i,s)},enableLinkTracking:function(){e.init(function(e){n.init(function(t){var n=e.findElement("."+o.classes.panelLinks);t.linkTrack(n)})})},populateTabIndex:function(e){var t=this,n=0;e.each(e.findElement("#"+t.$panel.ID+" [tabindex]"),function(){n++,e.addAttr(e.findElement(this),"tabindex",n)})},clearTabIndex:function(e,t){t.each(t.findElement("#"+e+" [tabindex]"),function(){t.addAttr(t.findElement(this),"tabindex","-1")})},getIconPosition:function(e,t){var n=this,r=e.findElement("#"+t+" ."+o.classes.icon)[0];return n.button.icon=r.getBoundingClientRect(),n.button.iconWidth=n.button.icon.right-n.button.icon.left,n.button.iconHeight=n.button.icon.bottom-n.button.icon.top,n.button.iconAbsPosition=n.getPosition(e,r),n.button.icon},getButtonPosition:function(e,t){var n=this;n.button.coor=document.getElementById(t).getBoundingClientRect(),n.button.cWidth=n.button.coor.right-n.button.coor.left,n.button.cHeight=n.button.coor.bottom-n.button.coor.top,n.button.absPosition=n.getPosition(e,document.getElementById(n.button.ID)),n.button.icon=n.getIconPosition(e,n.button.ID)},getButtonAbsPosition:function(e,t){e.findElement(t)},checkForActivePanels:function(e){var t=this;e.each("."+o.classes.panelOpen,function(){var n=this,r=e.attr(n,"id").replace("-panel",""),i=e.closest(e.findElement("#"+r),"."+o.classes.masterContainer)[0],s=n.parentNode;s!=i&&i.appendChild(n),t.removeClasses(e.children(i,".panel-open"),{"panel-open":"panel-open"},e)}),t.closePanels(e)},setDefaultPanelPosition:function(e){var t=this;e.css("#"+t.$panel.ID,"top",t.button.absPosition.y+t.button.cHeight+"px"),e.css("#"+t.$panel.ID,"left",t.button.absPosition.x)},setPanelOrientation:function(e){var t=this;e.hasClass(t.$panel,o.classes.auto)&&(e.addClass(t.$panel,o.classes.bottom),e.addClass(t.$panel,o.classes.right)),t.$panel.bleed.left>0&&e.hasClass(t.$panel,o.classes.auto)&&t.switchClasses(e,t.$panel,o.classes.left,o.classes.right),t.$panel.bleed.right>0&&e.hasClass(t.$panel,o.classes.auto)&&t.switchClasses(e,t.$panel,o.classes.right,o.classes.left),t.$panel.bleed.top>0&&e.hasClass(t.$panel,o.classes.auto)&&t.switchClasses(e,t.$panel,o.classes.top,o.classes.bottom),t.$panel.bleed.bottom>0&&e.hasClass(t.$panel,o.classes.auto)&&t.switchClasses(e,t.$panel,o.classes.bottom,o.classes.top)},setPanelPosition:function(e,t){var n=this;n.getPanelCoordinates(),e.hasClass(n.$panel,o.classes.top)&&(e.css("#"+n.$panel.ID,"top",n.button.absPosition.y-n.$panel.cHeight-12+"px"),n.$panel.coor=document.getElementById(n.$panel.ID).getBoundingClientRect(),n.$panel.coor.top<0&&e.hasClass(n.$panel,o.classes.auto)&&(n.switchClasses(e,n.$panel,o.classes.top,o.classes.bottom),n.setPanelPosition(e,0))),e.hasClass(n.$panel,o.classes.bottom)&&t!==undefined&&n.setDefaultPanelPosition(e);if(e.hasClass(n.$panel,o.classes.left)){var r=n.button.iconAbsPosition.x+n.button.iconWidth-n.$panel.cWidth+1;e.css("#"+n.$panel.ID,"left",r+"px"),n.getBleed(n.$panel.ID);if(n.$panel.bleed.left>0&&e.hasClass(n.$panel,o.classes.auto)){var i=(n.windowSize[0]-n.$panel.cWidth)/2;e.css("#"+n.$panel.ID,"left",i+"px"),n.switchClasses(e,n.$panel,o.classes.left,o.classes.center)}}n.setPointerPosition(n.$panel.ID,e)},setPointerPosition:function(e,t){var n=this,r="#"+e+" ."+o.classes.pointer,i=n.button.absPosition.x-n.getPosition(t,document.getElementById(e)).x;t.hasClass(n.$panel,o.classes.right)?(t.css(r,"left","8px"),t.css(r,"right","auto")):t.hasClass(n.$panel,o.classes.left)?(t.css(r,"right","auto"),t.css(r,"left",n.$panel.cWidth-32+"px")):t.hasClass(n.$panel,o.classes.center)&&t.css(r,"left",i+"px")},cloneAndMove:function(e,t){var n=document.getElementById(t),r=document.getElementsByTagName("body")[0];r.appendChild(n)},panelOpen:function(e,t){var n=this;n.checkForActivePanels(e),n.cloneAndMove(e,n.$panel.ID),e.toggleClass(n.$panel,o.classes.panelHidden),n.setDefaultPanelPosition(e);if((n.options.signedIn||!n.options.useIdCta)&&t!==!1)e.addClass("#"+n.$panel.ID+" .l-b-p-signin","l-b-p-hidden"),e.addClass("#"+n.$panel.ID+" .l-b-p-error","l-b-p-hidden"),e.removeClass("#"+n.$panel.ID+" .l-b-p-thanks","l-b-p-hidden");else if(t!==!1){e.addClass("#"+n.$panel.ID+" .l-b-p-thanks","l-b-p-hidden"),e.addClass("#"+n.$panel.ID+" .l-b-p-error","l-b-p-hidden"),e.removeClass("#"+n.$panel.ID+" .l-b-p-signIn","l-b-p-hidden");var r=e.findElement(".l-b-idCta .id4-cta-signin"),i=e.findElement(".l-b-idCta .id4-cta-register"),s=e.attr(r,"href"),u=e.attr(i,"href");s=s.split("%23")[0],u=u.split("%23")[0],s=s+"%23"+"loved-"+n.button.ID,u=u+"%23"+"loved-"+n.button.ID,e.addAttr(r,"href",s),e.addAttr(i,"href",u)}else e.addClass("#"+n.$panel.ID+" .l-b-p-thanks","l-b-p-hidden"),e.addClass("#"+n.$panel.ID+" .l-b-p-signin","l-b-p-hidden"),e.removeClass("#"+n.$panel.ID+" .l-b-p-error","l-b-p-hidden");n.options.useIdCta&&e.appendTo(".l-b-idCta","#"+n.$panel.ID+" .l-b-p-idCta"),n.getBleed(n.$panel.ID),n.setPanelOrientation(e),n.setPanelPosition(e);if(e.findElement(".l-b-ie").length>0||n.isIe())n.checkIfOverlaps(e,"#"+n.$panel.ID),n.$panel.panelOverlaps===!0&&(n.isVideoPaused(e,n.embedId),setTimeout(function(){n.playActions(e,n.embedId,"opening")},300));e.toggleClass(n.$panel,o.classes.panelHidden),e.addClass(n.$panel,o.classes.panelOpen),setTimeout(function(){e.addClass(n.$panel,o.classes.panelOpenLong)},200)},repositionPanel:function(e){var t=this;e.toggleClass(t.$panel,o.classes.panelHidden),t.setDefaultPanelPosition(e),t.getBleed(t.$panel.ID),t.setPanelOrientation(e),t.setPanelPosition(e);if(e.findElement(".l-b-ie").length>0||t.isIe())t.checkIfOverlaps(e,"#"+t.$panel.ID),t.$panel.panelOverlaps===!0&&(t.isVideoPaused(e,t.embedId),setTimeout(function(){t.playActions(e,t.embedId,"opening")},300))},panelClose:function(e,t,n){var r=this;n||(n=""),r.checkForActivePanels(e);if(e.findElement(".l-b-ie").length>0||r.isIe())r.showOverlapsed(e),r.playActions(e,r.embedId,"closing");e.hasClass(r.$panel,o.classes.auto)?r.removeClasses(r.$panel,o.classes,e):e.removeClass(r.$panel,o.classes.panelOpen),e.removeClass(r.$panel,o.classes.panelOpenLong)},closePanels:function(e){var t=this;t.showOverlapsed(e),e.each("."+o.classes.panelOpen,function(){t.clearTabIndex(e.attr(this,"id"),e),e.removeClass(this,o.classes.panelOpen),e.removeClass(this,o.classes.panelOpenLong)})},getPanelCoordinates:function(){var e=this;e.$panel.coor=document.getElementById(this.$panel.ID).getBoundingClientRect(),e.$panel.cWidth=e.$panel.coor.right-e.$panel.coor.left,e.$panel.cHeight=e.$panel.coor.bottom-e.$panel.coor.top},isOnTop:function(e,t,n){var r=e.offset(t),i=e.offset(n);t={x:r.left,y:r.top,w:e.outerWidth(t),h:e.outerHeight(n)},n={x:i.left,y:i.top,w:e.outerWidth(n),h:e.outerWidth(n)};var s=t.x,o=t.y,u=t.x+t.w,a=t.y+t.h,f=n.x,l=n.y,c=n.x+n.w,h=n.y+n.h,p=Math.abs(s+u-f-c),d=Math.abs(o+a-l-h),v=Math.abs(u-s+c-f),m=Math.abs(o-a+l-h);return p<=v&&d<=m},checkIfOverlaps:function(e,t){var n=this,r=e.findElement("object, embeded");e.each(r,function(){this.id=e.attr(this,"id"),n.isOnTop(e,"#"+this.id,t)?(n.hideOverlapsed(e,this.id),n.$panel.panelOverlaps=!0,n.embedId=this.id):n.$panel.panelOverlaps=!1})},hideOverlapsed:function(e,t){var n=this;n.isSMP(t)?e.addClass(e.closest(e.findElement("#"+t),"#"+n.getSmpId(e,t)),o.classes.Hide):(e.addClass(e.parent(e.findElement("#"+t),"div"),o.classes.flashHidden),e.css(e.findElement("#"+t),"visibility","hidden"))},showOverlapsed:function(e){e.css(e.findElement("."+o.classes.flashHidden+" object"),"visibility","visible"),e.removeClass(e.findElement("."+o.classes.iPlayerHide),o.classes.iPlayerHide),e.removeClass(e.findElement("."+o.classes.flashHidden),o.classes.flashHidden)},isSMP:function(e){return Array.prototype.indexOf||i.indexOfPrototype(),~e.indexOf("smp")?!0:!1},getSmpContainer:function(e,t){return e.parent(e.parent(e.parent(t)))},getSmpContainerId:function(e,t){var n=this,r=e.attr(n.getSmpContainer(e,e.findElement("#"+t)),"id");return r},getSmpId:function(e,t,n){var r=this,i;return typeof t=="undefined"?i=e.attr(r.getSmpContainer(e,n),"id"):typeof n=="undefined"&&(i=e.attr(r.getSmpContainer(e,e.findElement("#"+t)),"id")),i},isVideoPaused:function(e,t){var n=this;require.defined("bump-3")&&require(["bump-3"],function(){var r={playerProfile:"smp"},i;return i=e.findElement("#"+n.getSmpContainerId(e,t)).player(r).paused(),n.setVideoStatus(i),i})},setVideoStatus:function(e){typeof e=="undefined"||e===!0?u=!0:u=!1},playActions:function(e,t,n){var r=this;setTimeout(function(){u!==!0&&n=="closing"?r.playControl(e,"play",t):r.playControl(e,"pause",t)},1)},playControl:function(e,t,n){var r=this;require.defined("bump-3")&&require(["bump-3"],function(){var i={product:"iplayer",playerProfile:"smp",responsive:!0},s=e.findElement("#"+r.getSmpContainerId(e,n)).player(i);t=="play"?s.play():s.pause()})},getWindowSize:function(){var e=this,t=window,n=document,r=n.documentElement,i=n.getElementsByTagName("body")[0],s=t.innerWidth||r.clientWidth||i.clientWidth,o=t.innerHeight||r.clientHeight||i.clientHeight;this.windowSize=[s-e.getScrollbarWidth(),o]},getScrollbarWidth:function(){var e=document.createElement("div");e.className="scrollbar-measure",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t},getEventCode:function(e){var t=e.keyCode?e.keyCode:e.charCode;return t},getPosition:function(e,t){var n=e.offset(t);return{x:n.left,y:n.top}},getBleed:function(e){var t=this,n=document.getElementById(e),r=n.getBoundingClientRect();t.getWindowSize(),t.$panel.bleed={top:r.top-this.windowSize[1],left:-1*r.left,right:r.right-this.windowSize[0],bottom:r.bottom-this.windowSize[1]}},getStyle:function(e,t){var n=function(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})};return e.currentStyle?e.currentStyle[n(t)]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.style[n(t)]},removeClasses:function(e,t,n){for(var r in t)t[r]!=o.classes.panel&&t[r]!=o.classes.button&&t[r]!=o.classes.container&&t[r]!=o.classes.panelClose&&t[r]!=o.classes.auto&&n.removeClass(e,t[r])},switchClasses:function(e,t,n,r){e.addClass(t,r),e.removeClass(t,n)},addClasses:function(e,t,n){for(var r in t)n.addClass(e,t[r])},setCss:function(e,t){for(var n in e)t.css(e[n][0],e[n][1],e[n][2])},trackLoveClick:function(e,t,r,i){var s=this;n.init(function(n){var o={};i==null&&(i=s.container),o={love_version:i.version,love_button_variant:i.variant,love_product:r},o[i.contentType]=t,o.love_content_url=decodeURIComponent(i.contentUrl),n.log(s.stats.actionType,s.stats.actionName.replace(/%love_action%/,e),o)})},isIe:function(){Array.prototype.indexOf||i.indexOfPrototype();var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!=-1||e.indexOf("trident")!=-1?!0:!1},bindOffPanelClick:function(e,t){var n=this;t=t,e.onElem(t,"click touchend",function(t){if(t.type=="touchend")if(e.hasClass(t.target,"l-b-s")||e.hasClass(t.target,"gelicon--love")||e.hasClass(t.target,"l-b-button")){t.stopPropagation();return}if(e.hasClass(n.$panel,o.classes.panelOpenLong)&&n.dragging===!1){var r=n.$panel[0];e.contains(r,t.target)||(n.checkForActivePanels(e),n.panelClose(e,1))}})}},o.classes={container:"l-b",masterContainer:"l-b-container",button:"l-b-button",icon:"l-b-icon",pointer:"l-b-pointer",active:"l-b-active",panel:"l-b-panel",panelLinks:"l-b-p-links",panelOpen:"l-b-p-open-true",panelOpenLong:"l-b-p-open-long",panelHidden:"l-b-p-hidden",panelClose:"l-b-p-close",top:"l-b-p-top",bottom:"l-b-p-bottom",left:"l-b-p-left",right:"l-b-p-right",center:"l-b-p-center",more:"l-b-link",auto:"l-b-p-auto",flashHidden:"l-b-hidePlayer",iPlayerHide:"player-hide"},o}),define("bbclove/ui/templates/panel",[],function(){return function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="l-b-container l-b-'+((__t=locale)==null?"":__t)+'" data-version="2.0.2" data-variant="'+__e(variant)+'" data-content-type="'+__e(contentType)+'" data-content-url="'+__e(contentUrl)+'">\n<div class="l-b l-b-'+__e(variant)+" "+__e(lovedState)+' hover-state" data-content-id="'+__e(contentId)+'" data-product-id="'+__e(productId)+'" data-locale="'+__e(locale)+'" ',useIdCta==1&&(__p+='data-resourceDomain="'+__e(resourceDomain)+'" data-resourceType="'+__e(resourceType)+'" data-availability="'+__e(availability)+'" '),__p+=' aria-pressed="false" aria-live="polite" data-button-id="'+__e(loveId)+'">\n<form action="" method="get">\n<button class="l-b-button"  type="submit" tabindex="" value="'+__e(loveId)+'" name="love-button" id="'+__e(loveId)+'" aria-labelledby="'+__e(loveId)+'-label">\n<span class="l-b-icon l-b-s">\n<i aria-hidden="true" class="gelicon '+((__t=loveIcon)==null?"":__t)+' l-b-gelicon l-b-icon-nm"></i>\n<i aria-hidden="true" class="gelicon '+((__t=loveIconHover)==null?"":__t)+' l-b-gelicon l-b-icon-hv"></i>\n</span>\n<span id="'+__e(loveId)+'-label" class="l-b-labels">\n<span class="l-b-label l-b-s lb-btn-txt-nm" role="presentation">'+((__t=translate.getTranslations(locale,lvTxtNormal))==null?"":__t)+'</span>\n<span class="l-b-label l-b-s lb-btn-txt-hv" role="presentation" aria-hidden="true">'+((__t=translate.getTranslations(locale,lvTxtHover))==null?"":__t)+'</span>\n</span>\n</button>\n</form>\n</div>\n<div class="l-b-panel l-b-open-'+__e(panelOpen)+" l-b-"+__e(variantPanel)+" "+((__t=panelDirection)==null?"":__t)+'" id="'+__e(loveId)+'-panel">\n<span class="l-b-pointer"></span>\n<div class="l-b-p-thanks l-b-p-hidden">\n<p class="l-b-p-title">'+((__t=translate.getTranslations(locale,"Thanks for that."))==null?"":__t)+"</p>\n",useIdCta==1&&(__p+='\n<p class="l-b-p-body" >'+((__t=translate.getTranslations(locale,"Give you better recommendations"))==null?"":__t)+"</p>\n"),__p+='\n<div class="l-b-p-links" data-content-id="'+__e(contentId)+'" data-product-id="'+__e(productId)+'">\n',showMostLovedLink!=0&&showMostLovedLink!="false"&&(__p+='\n<a class="l-b-link l-b-tab" href="'+((__t=mostLovedUrl)==null?"":__t)+'" target="_parent" data-link-type="most-loved" tabindex>\n'+((__t=translate.getTranslations(locale,"See what other people are loving"))==null?"":__t)+"</a>\n"),__p+="\n",showNewsletterLink!=0&&showNewsletterLink!="false"&&useIdCta==0&&(__p+='\n<a class="l-b-link l-b-tab" style="display:inline-block;" href="'+((__t=newsletterUrl)==null?"":__t)+'" target="_parent" data-link-type="newsletter" tabindex>\n'+((__t=translate.getTranslations(locale,"Sign up for the BBC newsletter"))==null?"":__t)+"</a>\n"),__p+="\n",showMoreInfoLink!=0&&showMoreInfoLink!="false"&&useIdCta==1&&(__p+='\n<a class="l-b-link l-b-tab" style="display:inline-block;" href="'+((__t=moreInfoUrl)==null?"":__t)+'" target="_parent" data-link-type="more-info" tabindex><span class="l-b-icon l-b-s"><i aria-hidden="true" class="gelicon gelicon--info l-b-gelicon"></i></span><span>'+((__t=translate.getTranslations(locale,"Find out more"))==null?"":__t)+"</span></a>\n"),__p+='\n</div>\n</div>\n<div class="l-b-p-signIn l-b-p-hidden">\n<p class="l-b-p-subtitle">'+((__t=translate.getTranslations(locale,"Get better recommendations"))==null?"":__t)+'</p>\n<div class="l-b-p-idCta"></div>\n<div class="l-b-p-links" data-content-id="'+__e(contentId)+'" data-product-id="'+__e(productId)+'">\n',showMoreInfoLink!=0&&showMoreInfoLink!="false"&&useIdCta==1&&(__p+='\n<a class="l-b-link l-b-tab" style="display:inline-block;" href="'+((__t=moreInfoUrl)==null?"":__t)+'" target="_parent" data-link-type="more-info" tabindex><span class="l-b-icon l-b-s"><i aria-hidden="true" class="gelicon gelicon--info l-b-gelicon"></i></span>'+((__t=translate.getTranslations(locale,"Find out more"))==null?"":__t)+"</a>\n"),__p+='\n</div>\n</div>\n<div class="l-b-p-error l-b-p-hidden">\n<p class="l-b-p-title"><span class="l-b-icon l-b-s">\n<i aria-hidden="true" class="gelicon gelicon--alert l-b-gelicon"></i>\n</span>'+((__t=translate.getTranslations(locale,"Somethings gone wrong"))==null?"":__t)+'</a></p>\n<p class="l-b-p-body l-b-p-tryAgain">'+((__t=translate.getTranslations(locale,"Please try again later"))==null?"":__t)+'</a></p>\n</div>\n<a href="#" class="l-b-p-close l-b-tab"  title="'+((__t=translate.getTranslations(locale,"Close"))==null?"":__t)+'" aria-label="'+((__t=translate.getTranslations(locale,"Close"))==null?"":__t)+'  Panel" tabindex><span class="l-b-p-closeicon"><i aria-hidden="true" class="gelicon gelicon--no"></i></span></a>\n</div>\n</div>';return __p}}),define("loveConfig",[],function(){return{version:"2.0.0"}}),define("loveOptions",[],function(){return{loveId:{label:"Love ID (unique)",description:"ID to be added to button wrapper to aid custom targetting. Will be ascending from 1 if empty.",type:"text",required:!1},contentId:{label:"Content ID",description:"The ID of the content being 'loved' (e.g. pid)",type:"text",required:!0},contentType:{label:"Content Type",description:"The content label used in iStats. eg. episode_id, clip_id or brand_id. When this label is passed to iStats with the contentID it will be enriched to included additional meta data.",type:"text","default":"love_content_id"},productId:{label:"Product ID",description:"The product/service using the love button so origin can be captured",type:"text",required:!0},resourceDomain:{label:"Resource Domain",description:"For UAS: The domain of the activity resource, can be one of tv, radio, store-tv, sport, music, homepage, profile, news",type:"text"},resourceType:{label:"Resource Type",description:"For UAS: The type of resource under the specified domain. Can be one of: artist | brand | clip | episode | location | playlist | series | service | topic | curation | article | genre | track (NOT YET LIVE) | recipe (NOT YET LIVE). Last updated 10/15, please see UAS docs for latest info.",type:"text"},contentUrl:{label:"Content URL",description:"The value assigned to this label is the full canonical URL for the item of content that the love button is associated with.",type:"text",required:!0},locale:{label:"Locale",description:"Set the display locale of the Love button. Used to determine button text (translations)",type:"select","default":"en-gb",values:{"en-gb":"English","cy-gb":"Welsh","ga-gb":"Irish Gaelic","gd-gb":"Scottish Gaelic"},valueAliases:{en:"en-gb",cy:"cy-gb",ga:"ga-gb",gd:"gd-gb"},normaliseValue:"lowercase"},variant:{label:"Variant",description:"Name of button variant (colour scheme)",type:"select","default":"bordered-pink",values:{"bordered-pink":"Button with pink background and border around white text","borderless-light":"Button with transparent border and background with white/pink text","borderless-dark":"Button with transparent border and background with dark grey text"}},variantPanel:{label:"Variant panel",description:"Specify the display variant to render the panel.",type:"select","default":"light",values:{light:"Displays the default, light panel.",dark:"Displays the dark panel"}},showMostLovedLink:{label:"Show most loved link",description:"Toggle for displaying the 'show most loved' link in panel",type:"boolean","default":!0,values:{"true":"Shows most loved link.","false":"Hides most loved link."}},mostLovedUrl:{label:"Most Loved URL",description:"URL for the 'most loved' page displayed in the panel",type:"text","default":"http://www.bbc.co.uk/love"},showNewsletterLink:{label:"Show newsletter link",description:"Toggle for displaying the 'newsletter' link in the panel",type:"boolean","default":!0,values:{"true":"Shows newsletter link.","false":"Hides newsletter link."}},newsletterUrl:{label:"Newsletter URL",description:"***** to be deprecated ***** URL to the 'newsletter signup' page",type:"text","default":"https://ssl.bbc.co.uk/newsletters/panbbc"},showMoreInfoLink:{label:"Show find out more link",description:"***** to be deprecated ***** Toggle for displaying the 'find out more' link in the panel",type:"boolean","default":!1,values:{"true":"Shows find out more link.","false":"Hides find out more link."}},moreInfoUrl:{label:"Find out more URL",description:"URL to the 'find out more' page",type:"text","default":"http://www.bbc.co.uk/iplayer/features/recommendations"},availability:{label:"iPlayer availability",description:"Toggle to let reccs know whether something is available on iPlayer or not",type:"boolean","default":null,values:{"true":"Tells reccs that a programme is available","false":"Tells reccs that a programme isn't available"}},panelDirection:{label:"Panel direction",description:"Override the display direction of the love panel drop-down.",type:"select","default":"auto",values:{auto:"Automatically change depending on screen real estate.",tl:"Top left",tr:"Top right",bl:"Bottom left",br:"Bottom right"},normaliseValue:"lowercase"},panelOpen:{label:"Panel Open",description:"INTERNAL - opens the love panel for non-js browsers.",type:"boolean","default":!1,values:{"true":"Opens panel.","false":"Panel is closed on load."}},js:{label:"JavaScript",description:"Automatically load JavaScript required by the module.",type:"boolean","default":"true",pageWide:!0,values:{"true":"Automatically load JavaScript.","false":"Disables loading of JavaScript. Useful if client wishes to concatenate JS or for non-JS testing."}},css:{label:"CSS",description:"Automatically load CSS required by the module.",type:"boolean","default":"true",pageWide:!0,values:{"true":"Automatically load CSS.","false":"Disables loading of CSS. Useful if client wishes to concatenate CSS."}}}}),define("bbcloveapi",["exports","loveConfig","loveOptions","lovedom","bbcpolyfill"],function(e,t,n,r,i,s){function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}var o={},u=t;return n.defaults={redirect_uri:window.location.origin+"/modules/love/close",version:""},s={checkForId:function(e){try{if(typeof document.getElementById(e)=="undefined"||document.getElementById(e)===null)throw e}catch(t){return console.error("Love button with id: "+t+" does not exist."),"error"}},checkIfRequiredExist:function(e){try{for(var t in n)if((typeof e[t]=="undefined"||e[t]==="")&&n[t].required&&typeof n.defaults[t]=="undefined")throw t}catch(r){return console.error(r+" is required. Please provide one."),"error"}},getDefaultOptions:function(e){var t=e;for(var r in n){(typeof t[r]=="undefined"||t[r]===""||t[r].length===0)&&typeof n[r]["default"]!="undefined"&&(t[r]=n[r]["default"]);if(r=="redirect_uri"){if(!window.location.origin){var s=i.windowLocationOriginPrototype();n.defaults[r]=s+"/modules/love/close"}t[r]=n.defaults[r]}}t.newsletterUrl+="?ptrt="+encodeURIComponent(window.location.href),this.normaliseLocale(t);if(typeof t["loveId"]=="undefined"||t["loveId"]=="")t.loveId=a();return t},normaliseLocale:function(e){return e.locale=e.locale.substring(0,2).toLowerCase()+"-gb"},getPanelDirection:function(e){var t={auto:"l-b-p-auto",tr:"l-b-p-top l-b-p-right",tl:"l-b-p-top l-b-p-left",br:"l-b-p-bottom l-b-p-right",bl:"l-b-p-bottom l-b-p-left","l-b-p-auto":"l-b-p-auto","l-b-p-top l-b-p-right":"l-b-p-top l-b-p-right","l-b-p-top l-b-p-left":"l-b-p-top l-b-p-left","l-b-p-bottom l-b-p-right":"l-b-p-bottom l-b-p-right","l-b-p-bottom l-b-p-left":"l-b-p-bottom l-b-p-left"};return e.panelDirection=t[e.panelDirection]},replaceCharacters:function(e){var t=["&#34;","&#38;","&#60;","&#62;","&#39;"],n=['"',"&","<",">","'"],r=t.length,i,s,o;if(typeof e!="undefined")for(var u=0;u<r;u++)i=new RegExp(t[u],"gi"),s=n[u],o=e.replace(i,s);return o}},s}),define("bbclove",["exports","./bbclove/ui/love-view","lovedom","bbclovetranslate","./bbclove/ui/templates/panel","bbcloveapi","bbcstorage","bbccookie","loveConfig","bbcloveuas"],function(e,t,n,r,i,s,o,u,a,f){return window._=window._||{},window._.escape=window.escape,e=e||{},o=o||{},e.Love=t,e={init:function(t){e.createLove(t)},createLove:function(e){return t.init(e)},render:function(e,t){var i=this;try{n.init(function(n){if(!0!==navigator.cookieEnabled||!0!==u.getFunctionalCookieStatus()||s.checkIfRequiredExist(t)==="error")return!1;var o,a;t=t||{},t.translate=r,t.version="",t.panelOpen=!1,s.getDefaultOptions(t),s.getPanelDirection(t),t.useIdCta=typeof t.useIdCta!="undefined"?t.useIdCta:!1,t.useIdCta?require(["idcta/idcta-1"],function(r){t.userId=r.getIdFromCookie(),t.signedIn=r.hasCookie(),o=t.signedIn?u.getLovedStatus(t):"not-loved",i._renderNow(e,o,t);if(t.signedIn){var s=window.location.hash;s!==""&&s.substring(1)=="loved-"+t.loveId&&u.idCookieRecentlyUpdated()&&o!="loved"&&(n.findElement("#"+e).children().children().trigger("click"),document.location.hash="")}}):(o=u.getLovedStatus(t),i._renderNow(e,o,t))})}catch(o){return!1}},_renderNow:function(e,n,r){t.locale=r.locale,n==="loved"?(r.lvTxtNormal="Loved",r.lvTxtHover="Unlove",r.lovedState="loved",r.loveIcon="gelicon--love",r.loveIconHover="gelicon--love-outline"):(r.lvTxtNormal="Love",r.lvTxtHover="Love",r.lovedState="",r.loveIcon="gelicon--love-outline",r.loveIconHover="gelicon--love"),template=i(r),document.getElementById(e).innerHTML=template,t.eventEmitter=r.eventEmitter,t.cookie=u,t.loveUas=f,t.config=a,t.init(r)}},e});