define("personalisation/dialog/dom",["personalisation/vendor"],function(n){return{on:function(e,t,i){return n.bean.on(e,t,i)},off:function(e,t){return t?n.bean.off(e,t):n.bean.off(e)},empty:function(e){return n.bonzo(e).empty()},findElement:function(e,t){return e=e||null,t=t||null,n.qwery(e,t)},parseData:function(e){return n.bonzo(e).data()},addClass:function(e,t){return n.bonzo(e).addClass(t)},removeClass:function(e,t){return n.bonzo(e).removeClass(t)},getHTML:function(e){return n.bonzo(e).html()},setHTML:function(e,t){return n.bonzo(e).html(t)},setText:function(e,t){return n.bonzo(e).text(t)},getAttr:function(e,t){return n.bonzo(e).attr(t)},setAttr:function(e,t,i){return n.bonzo(e).attr(t,i)},focus:function(e){return n.bonzo(e).focus()},blur:function(e){return n.bonzo(e).blur()},show:function(e){return n.bonzo(e).show()},hide:function(e){return n.bonzo(e).hide()},append:function(e,t){return n.bonzo(e).append(t)},css:function(e,t){return n.bonzo(e).css(t)},offset:function(e){return n.bonzo(e).offset()},parent:function(e){return n.bonzo(e).parent()}}}),define("personalisation/dialog/text",{"en-gb":{cannotAddFavourite:"Sorry we couldn't add your Favourite",cannotRemoveFavourite:"Sorry we couldn't remove your Favourite",tryAgain:"Please try again later",close:"close"},"cy-gb":{cannotAddFavourite:"Mae'n ddrwg gennym ond nid oedd modd ychwanegu eich ffefryn",cannotRemoveFavourite:"Mae'n ddrwg gennym ond nid oedd modd dileu eich ffefryn",tryAgain:"Rhowch gynnig arall wedyn",close:"close"},"ga-gb":{cannotAddFavourite:"Ar an drochuair, n&iacute;orbh fh&eacute;idir sin a chur le do Chean&aacute;in",cannotRemoveFavourite:"Ar an drochuair n&iacute;orbh fh&eacute;idir sin a bhaint de do Chean&aacute;in.",tryAgain:"Bain triail as ar&iacute;s ar ball",close:"close"},"gd-gb":{cannotAddFavourite:"Duilich, cha b' urrainn dhuinn an Roghainn agad a chur ris",cannotRemoveFavourite:"Duilich, cha b' urrainn dhuinn an Roghainn agad a thoirt &aacute;s",tryAgain:"Feuch an ceann &ugrave;ine",close:"close"}}),define("personalisation/dialog/env",["exports","module"],function(n,e){var t="/modules/personalisation",i="^([^:]+://[^/]+)("+t+"/[^/]+)";return n=n||{},n._moduleURI=e&&e.uri||"",n.resolveStaticURL=function(e){if("string"!=typeof e)return void 0;var t,o=new RegExp(i);return o.test(n._moduleURI)&&(t=o.exec(n._moduleURI))?t[1]+("/"==e.charAt(0)?"":t[2]+"/")+e:void 0},n}),define("personalisation/dialog/events",["personalisation/vendor","exports"],function(n,e){return e=new n.pubsub}),define("personalisation/dialog/dialog",["./dom","./text","./env","./events","exports"],function(n,e,t,i,o,s){var a=null;return o=function(){var n=this;if(n.lang="en-gb",null!==a)throw new Error("Cannot instantiate more than one Dialog, use Dialog.getInstance()");return n.initialize(),{setContent:function(e,t){n.setContent(e),t&&t()},show:function(e,t){s=e,n.show(),t&&t()},hide:function(e){n.hide(),e&&e()},subscribe:function(e,t){n.subscribe(e,t)},getLocalisedString:function(e,t){return n.getLocalisedString(e,t)},classes:o.classes}},o.prototype={initialize:function(){var n=this;n.subscribe("visible",function(){o.flash.hideAll()}),n.subscribe("hidden",function(){o.flash.showAll()}),n.setWrapper(),n.bindEvents()},getLocalisedString:function(n,t){var i;return t&&e[t]||(t="en-gb"),i=e[t],n=n||"",i[n]?i[n]:"en-gb"!==t&&getLocalisedString(n,"en-gb")||n},setWrapper:function(){var e=['<div class="',o.classes.overlay,'">',"</div>",'<div class="',o.classes.wrapper,'">','<div class="',o.classes["wrapper-inner"]," ",o.classes.clearfix,'" tabindex="1">','<button class="',o.classes.close,'">','<img src="',t.resolveStaticURL("img/close.png"),'">','<span class="',o.classes.hidden,'">',this.getLocalisedString("close",this.lang),"</span>","</button>",'<div class="',o.classes.content,'">','<div class="',o.classes["content-inner"],'">',"</div>","</div>","</div>","</div>"].join("");n.findElement("."+o.classes.wrapper).length||n.append(n.findElement("body"),e),this.hide()},bindEvents:function(){var e,t=this;n.on(n.findElement("."+o.classes.close)[0],"click",function(n){n.stop(),t.hide(e=!0)}),n.on(n.findElement("."+o.classes.overlay)[0],"click",function(n){n.stop(),t.hide(e=!0)}),n.on(document,"keydown",function(n){27==n.keyCode&&(n.stop(),t.hide(e=!1))})},center:function(){var e=n.offset(n.findElement("."+o.classes.content)),t=n.offset(n.findElement("."+o.classes.close)),i=n.offset(n.findElement("."+o.classes.wrapper)),s=i.width,a=i.height,r=e.width+t.width;"undefined"!=typeof window.innerWidth&&window.innerWidth<250&&(s=r),"undefined"!=typeof window.innerHeight&&window.innerHeight<e.height&&(a=e.height-.05*e.height),n.css(n.findElement("."+o.classes.wrapper),{"margin-left":"-"+s/2+"px","margin-top":"-"+a/2+"px",width:s+"px",height:a+"px","z-index":"9999"})},setContent:function(e){n.setHTML(n.findElement("."+o.classes["content-inner"]),e)},removeContent:function(){n.empty(n.findElement("."+o.classes["content-inner"]))},show:function(){n.show(n.findElement("."+o.classes.overlay)),n.show(n.findElement("."+o.classes.wrapper)),this.center(),this.focus(),this.publish("visible",this);var e=this;n.findElement("."+o.classes.manageLink).length>0&&n.on(n.findElement("."+o.classes.manageLink)[0],"click",function(){e.hide(clicked=!0)})},hide:function(e){n.setAttr(n.findElement("."+o.classes.wrapper),"style",""),n.hide(n.findElement("."+o.classes.overlay)),n.hide(n.findElement("."+o.classes.wrapper)),this.removeContent(),this.blur(e),this.publish("hidden",this)},focus:function(){setTimeout(function(){n.focus(n.findElement("."+o.classes["wrapper-inner"])[0]),n.addClass(n.findElement("."+o.classes.wrapper),o.classes.focus)},200)},blur:function(e){n.blur(n.findElement("."+o.classes.close)),n.removeClass(n.findElement("."+o.classes.close),o.classes.focus),e||n.focus(n.findElement("#"+s))}},o.flash={hide:function(e){n.css(e,{visibility:"hidden"})},show:function(e){n.css(e,{visibility:"visible"})},hideAll:function(){var e,t=n.findElement("object, embed"),i=0;for(i;e=t[i];i++)this.hide(e)},showAll:function(){var e,t=n.findElement("object, embed"),i=0;for(i;e=t[i];i++)this.show(e)}},o.classes={overlay:"p-f-dialog-overlay",wrapper:"p-f-dialog-wrapper","wrapper-inner":"p-f-dialog-wrapper-inner",content:"p-f-dialog-content","content-inner":"p-f-dialog-content-inner",heading:"p-f-dialog-heading",text:"p-f-dialog-text",close:"p-f-dialog-close",focus:"p-f-dialog-focus",hidden:"p-f-hidden",manageLink:"p-f-manage-link",clearfix:"clearfix"},o.getInstance=function(){return null===a&&(a=new o),a},i.context("dialog",o),o.getInstance()});
//# sourceMappingURL=dialog.js.map